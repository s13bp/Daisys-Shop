{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContractKit = exports.newKitFromWeb3 = exports.newKitWithApiKey = exports.newKit = exports.API_KEY_HEADER_KEY = void 0;\n\nvar connect_1 = require(\"@celo/connect\");\n\nvar wallet_local_1 = require(\"@celo/wallet-local\");\n\nvar bignumber_js_1 = require(\"bignumber.js\");\n\nvar net_1 = __importDefault(require(\"net\"));\n\nvar web3_1 = __importDefault(require(\"web3\"));\n\nvar address_registry_1 = require(\"./address-registry\");\n\nvar base_1 = require(\"./base\");\n\nvar celo_tokens_1 = require(\"./celo-tokens\");\n\nvar contract_cache_1 = require(\"./contract-cache\");\n\nvar web3_contract_cache_1 = require(\"./web3-contract-cache\");\n\nexports.API_KEY_HEADER_KEY = 'apiKey';\n/**\n * Creates a new instance of `ContractKit` given a nodeUrl\n * @param url CeloBlockchain node url\n * @optional wallet to reuse or add a wallet different than the default (example ledger-wallet)\n * @optional options to pass to the Web3 HttpProvider constructor\n */\n\nfunction newKit(url, wallet, options) {\n  var web3;\n\n  if (url.endsWith('.ipc')) {\n    web3 = new web3_1.default(new web3_1.default.providers.IpcProvider(url, net_1.default));\n  } else if (url.toLowerCase().startsWith('http')) {\n    web3 = new web3_1.default(new web3_1.default.providers.HttpProvider(url, options));\n  } else {\n    web3 = new web3_1.default(url);\n  }\n\n  return newKitFromWeb3(web3, wallet);\n}\n\nexports.newKit = newKit;\n/**\n * Creates a new instance of `ContractKit` given a nodeUrl and apiKey\n * @param url CeloBlockchain node url\n * @param apiKey to include in the http request header\n * @optional wallet to reuse or add a wallet different than the default (example ledger-wallet)\n */\n\nfunction newKitWithApiKey(url, apiKey, wallet) {\n  var options = {};\n  options.headers = [];\n  options.headers.push({\n    name: exports.API_KEY_HEADER_KEY,\n    value: apiKey\n  });\n  return newKit(url, wallet, options);\n}\n\nexports.newKitWithApiKey = newKitWithApiKey;\n/**\n * Creates a new instance of the `ContractKit` with a web3 instance\n * @param web3 Web3 instance\n */\n\nfunction newKitFromWeb3(web3, wallet) {\n  if (wallet === void 0) {\n    wallet = new wallet_local_1.LocalWallet();\n  }\n\n  if (!web3.currentProvider) {\n    throw new Error('Must have a valid Provider');\n  }\n\n  return new ContractKit(new connect_1.Connection(web3, wallet));\n}\n\nexports.newKitFromWeb3 = newKitFromWeb3;\n\nvar ContractKit =\n/** @class */\nfunction () {\n  function ContractKit(connection) {\n    var _this = this;\n\n    this.connection = connection; // TODO: remove once cUSD gasPrice is available on minimumClientVersion node rpc\n\n    this.gasPriceSuggestionMultiplier = 5;\n\n    this.getHumanReadableNetworkConfig = function () {\n      return _this.getNetworkConfig(true);\n    };\n\n    this.registry = new address_registry_1.AddressRegistry(this);\n    this._web3Contracts = new web3_contract_cache_1.Web3ContractCache(this);\n    this.contracts = new contract_cache_1.WrapperCache(this);\n    this.celoTokens = new celo_tokens_1.CeloTokens(this);\n  }\n\n  ContractKit.prototype.getWallet = function () {\n    return this.connection.wallet;\n  };\n\n  ContractKit.prototype.getTotalBalance = function (address) {\n    return __awaiter(this, void 0, void 0, function () {\n      var lockedCelo, lockedBalance, pending, err_1, _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contracts.getLockedGold()];\n\n          case 1:\n            lockedCelo = _b.sent();\n            return [4\n            /*yield*/\n            , lockedCelo.getAccountTotalLockedGold(address)];\n\n          case 2:\n            lockedBalance = _b.sent();\n            pending = new bignumber_js_1.BigNumber(0);\n            _b.label = 3;\n\n          case 3:\n            _b.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , lockedCelo.getPendingWithdrawalsTotalValue(address)];\n\n          case 4:\n            pending = _b.sent();\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_1 = _b.sent();\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            _a = [{\n              lockedCELO: lockedBalance,\n              pending: pending\n            }];\n            return [4\n            /*yield*/\n            , this.celoTokens.balancesOf(address)];\n\n          case 7:\n            return [2\n            /*return*/\n            , __assign.apply(void 0, _a.concat([_b.sent()]))];\n        }\n      });\n    });\n  };\n\n  ContractKit.prototype.getNetworkConfig = function (humanReadable) {\n    if (humanReadable === void 0) {\n      humanReadable = false;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var configContracts, configMethod, configArray, configMap;\n\n      var _a;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            configContracts = [base_1.CeloContract.Election, base_1.CeloContract.Attestations, base_1.CeloContract.Governance, base_1.CeloContract.LockedGold, base_1.CeloContract.SortedOracles, base_1.CeloContract.GasPriceMinimum, base_1.CeloContract.Reserve, base_1.CeloContract.Validators, base_1.CeloContract.DowntimeSlasher, base_1.CeloContract.BlockchainParameters, base_1.CeloContract.EpochRewards, base_1.CeloContract.GrandaMento];\n\n            configMethod = function (contract) {\n              return __awaiter(_this, void 0, void 0, function () {\n                var configContractWrapper, e_1;\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      _a.trys.push([0, 2,, 3]);\n\n                      return [4\n                      /*yield*/\n                      , this.contracts.getContract(contract)];\n\n                    case 1:\n                      configContractWrapper = _a.sent();\n\n                      if (humanReadable && 'getHumanReadableConfig' in configContractWrapper) {\n                        return [2\n                        /*return*/\n                        , configContractWrapper.getHumanReadableConfig()];\n                      } else if ('getConfig' in configContractWrapper) {\n                        return [2\n                        /*return*/\n                        , configContractWrapper.getConfig()];\n                      } else {\n                        throw new Error('No config endpoint found');\n                      }\n\n                      return [3\n                      /*break*/\n                      , 3];\n\n                    case 2:\n                      e_1 = _a.sent();\n                      return [2\n                      /*return*/\n                      , new Error(\"Failed to fetch config for contract \" + contract + \": \\n\" + e_1)];\n\n                    case 3:\n                      return [2\n                      /*return*/\n                      ];\n                  }\n                });\n              });\n            };\n\n            return [4\n            /*yield*/\n            , Promise.all(configContracts.map(configMethod))];\n\n          case 1:\n            configArray = _b.sent();\n            configMap = {};\n            configArray.forEach(function (config, index) {\n              return configMap[configContracts[index]] = config;\n            });\n            _a = {};\n            return [4\n            /*yield*/\n            , this.celoTokens.getExchangesConfigs(humanReadable)];\n\n          case 2:\n            _a.exchanges = _b.sent();\n            return [4\n            /*yield*/\n            , this.celoTokens.getStablesConfigs(humanReadable)];\n\n          case 3:\n            return [2\n            /*return*/\n            , __assign.apply(void 0, [(_a.stableTokens = _b.sent(), _a), configMap])];\n        }\n      });\n    });\n  };\n  /**\n   * Set CeloToken to use to pay for gas fees\n   * @param tokenContract CELO (GoldToken) or a supported StableToken contract\n   */\n\n\n  ContractKit.prototype.setFeeCurrency = function (tokenContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      var address, _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!(tokenContract === base_1.CeloContract.GoldToken)) return [3\n            /*break*/\n            , 1];\n            _a = undefined;\n            return [3\n            /*break*/\n            , 3];\n\n          case 1:\n            return [4\n            /*yield*/\n            , this.registry.addressFor(tokenContract)];\n\n          case 2:\n            _a = _b.sent();\n            _b.label = 3;\n\n          case 3:\n            address = _a;\n            if (!address) return [3\n            /*break*/\n            , 5];\n            return [4\n            /*yield*/\n            , this.updateGasPriceInConnectionLayer(address)];\n\n          case 4:\n            _b.sent();\n\n            _b.label = 5;\n\n          case 5:\n            this.connection.defaultFeeCurrency = address;\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }; // TODO: remove once cUSD gasPrice is available on minimumClientVersion node rpc\n\n\n  ContractKit.prototype.updateGasPriceInConnectionLayer = function (currency) {\n    return __awaiter(this, void 0, void 0, function () {\n      var gasPriceMinimum, rawGasPrice, gasPrice;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contracts.getGasPriceMinimum()];\n\n          case 1:\n            gasPriceMinimum = _a.sent();\n            return [4\n            /*yield*/\n            , gasPriceMinimum.getGasPriceMinimum(currency)];\n\n          case 2:\n            rawGasPrice = _a.sent();\n            gasPrice = rawGasPrice.multipliedBy(this.gasPriceSuggestionMultiplier).toFixed();\n            return [4\n            /*yield*/\n            , this.connection.setGasPriceForCurrency(currency, gasPrice)];\n\n          case 3:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  ContractKit.prototype.getEpochSize = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var validators, epochSize;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contracts.getValidators()];\n\n          case 1:\n            validators = _a.sent();\n            return [4\n            /*yield*/\n            , validators.getEpochSize()];\n\n          case 2:\n            epochSize = _a.sent();\n            return [2\n            /*return*/\n            , epochSize.toNumber()];\n        }\n      });\n    });\n  };\n\n  ContractKit.prototype.getFirstBlockNumberForEpoch = function (epochNumber) {\n    return __awaiter(this, void 0, void 0, function () {\n      var epochSize;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getEpochSize() // Follows GetEpochFirstBlockNumber from celo-blockchain/blob/master/consensus/istanbul/utils.go\n            ];\n\n          case 1:\n            epochSize = _a.sent(); // Follows GetEpochFirstBlockNumber from celo-blockchain/blob/master/consensus/istanbul/utils.go\n\n            if (epochNumber === 0) {\n              // No first block for epoch 0\n              return [2\n              /*return*/\n              , 0];\n            }\n\n            return [2\n            /*return*/\n            , (epochNumber - 1) * epochSize + 1];\n        }\n      });\n    });\n  };\n\n  ContractKit.prototype.getLastBlockNumberForEpoch = function (epochNumber) {\n    return __awaiter(this, void 0, void 0, function () {\n      var epochSize, firstBlockNumberForEpoch;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getEpochSize() // Follows GetEpochLastBlockNumber from celo-blockchain/blob/master/consensus/istanbul/utils.go\n            ];\n\n          case 1:\n            epochSize = _a.sent(); // Follows GetEpochLastBlockNumber from celo-blockchain/blob/master/consensus/istanbul/utils.go\n\n            if (epochNumber === 0) {\n              return [2\n              /*return*/\n              , 0];\n            }\n\n            return [4\n            /*yield*/\n            , this.getFirstBlockNumberForEpoch(epochNumber)];\n\n          case 2:\n            firstBlockNumberForEpoch = _a.sent();\n            return [2\n            /*return*/\n            , firstBlockNumberForEpoch + (epochSize - 1)];\n        }\n      });\n    });\n  };\n\n  ContractKit.prototype.getEpochNumberOfBlock = function (blockNumber) {\n    return __awaiter(this, void 0, void 0, function () {\n      var epochSize, epochNumber;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getEpochSize() // Follows GetEpochNumber from celo-blockchain/blob/master/consensus/istanbul/utils.go\n            ];\n\n          case 1:\n            epochSize = _a.sent();\n            epochNumber = Math.floor(blockNumber / epochSize);\n\n            if (blockNumber % epochSize === 0) {\n              return [2\n              /*return*/\n              , epochNumber];\n            } else {\n              return [2\n              /*return*/\n              , epochNumber + 1];\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }; // *** NOTICE ***\n  // Next functions exists for backwards compatibility\n  // These should be consumed via connection to avoid future deprecation issues\n\n\n  ContractKit.prototype.addAccount = function (privateKey) {\n    this.connection.addAccount(privateKey);\n  };\n\n  Object.defineProperty(ContractKit.prototype, \"defaultAccount\", {\n    get: function () {\n      return this.connection.defaultAccount;\n    },\n    set: function (address) {\n      this.connection.defaultAccount = address;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ContractKit.prototype, \"gasInflationFactor\", {\n    get: function () {\n      return this.connection.defaultGasInflationFactor;\n    },\n    set: function (factor) {\n      this.connection.defaultGasInflationFactor = factor;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ContractKit.prototype, \"gasPrice\", {\n    get: function () {\n      return this.connection.defaultGasPrice;\n    },\n    set: function (price) {\n      this.connection.defaultGasPrice = price;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ContractKit.prototype, \"defaultFeeCurrency\", {\n    get: function () {\n      return this.connection.defaultFeeCurrency;\n    },\n    set: function (address) {\n      this.connection.defaultFeeCurrency = address;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ContractKit.prototype.isListening = function () {\n    return this.connection.isListening();\n  };\n\n  ContractKit.prototype.isSyncing = function () {\n    return this.connection.isSyncing();\n  };\n\n  ContractKit.prototype.fillGasPrice = function (tx) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!(tx.feeCurrency && tx.gasPrice === '0')) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this.updateGasPriceInConnectionLayer(tx.feeCurrency)];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , this.connection.fillGasPrice(tx)];\n        }\n      });\n    });\n  };\n\n  ContractKit.prototype.sendTransaction = function (tx) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.connection.sendTransaction(tx)];\n      });\n    });\n  };\n\n  ContractKit.prototype.sendTransactionObject = function (txObj, tx) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.connection.sendTransactionObject(txObj, tx)];\n      });\n    });\n  };\n\n  ContractKit.prototype.signTypedData = function (signer, typedData) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.connection.signTypedData(signer, typedData)];\n      });\n    });\n  };\n\n  ContractKit.prototype.stop = function () {\n    this.connection.stop();\n  };\n\n  Object.defineProperty(ContractKit.prototype, \"web3\", {\n    get: function () {\n      return this.connection.web3;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ContractKit;\n}();\n\nexports.ContractKit = ContractKit;","map":{"version":3,"mappings":"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","names":["exports","newKit","url","wallet","options","web3","endsWith","web3_1","providers","IpcProvider","net_1","toLowerCase","startsWith","HttpProvider","newKitFromWeb3","newKitWithApiKey","apiKey","headers","push","name","value","wallet_local_1","currentProvider","Error","ContractKit","connect_1","connection","getNetworkConfig","registry","address_registry_1","_web3Contracts","web3_contract_cache_1","contracts","contract_cache_1","celoTokens","celo_tokens_1","address","getLockedGold","lockedCelo","_b","getAccountTotalLockedGold","lockedBalance","pending","bignumber_js_1","getPendingWithdrawalsTotalValue","lockedCELO","balancesOf","humanReadable","configContracts","base_1","Election","Attestations","Governance","LockedGold","SortedOracles","GasPriceMinimum","Reserve","Validators","DowntimeSlasher","BlockchainParameters","EpochRewards","GrandaMento","configMethod","contract","getContract","configContractWrapper","_a","getHumanReadableConfig","getConfig","e_1","Promise","all","map","configArray","configMap","forEach","config","index","getExchangesConfigs","getStablesConfigs","tokenContract","GoldToken","addressFor","updateGasPriceInConnectionLayer","defaultFeeCurrency","currency","getGasPriceMinimum","gasPriceMinimum","rawGasPrice","gasPrice","multipliedBy","gasPriceSuggestionMultiplier","toFixed","setGasPriceForCurrency","getValidators","validators","getEpochSize","epochSize","toNumber","epochNumber","getFirstBlockNumberForEpoch","firstBlockNumberForEpoch","blockNumber","Math","floor","privateKey","addAccount","Object","defaultAccount","defaultGasInflationFactor","factor","defaultGasPrice","price","isListening","isSyncing","tx","feeCurrency","fillGasPrice","sendTransaction","txObj","sendTransactionObject","signer","typedData","signTypedData","stop"],"sourceRoot":"","sources":["../src/kit.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}