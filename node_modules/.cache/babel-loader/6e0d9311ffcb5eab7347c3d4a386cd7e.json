{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletConnectConnector = exports.CeloExtensionWalletConnector = exports.MetaMaskConnector = exports.InjectedConnector = exports.UnsupportedChainIdError = exports.LedgerConnector = exports.PrivateKeyConnector = exports.UnauthenticatedConnector = void 0;\n\nvar contractkit_1 = require(\"@celo/contractkit\");\n\nvar wallet_local_1 = require(\"@celo/wallet-local\"); // Uncomment with WCV2 support\n// import {\n//   WalletConnectWallet,\n//   WalletConnectWalletOptions,\n// } from '@celo/wallet-walletconnect';\n\n\nvar wallet_walletconnect_v1_1 = require(\"@celo/wallet-walletconnect-v1\");\n\nvar bignumber_js_1 = require(\"bignumber.js\");\n\nvar constants_1 = require(\"../constants\");\n\nvar ethereum_1 = require(\"../utils/ethereum\");\n\nvar helpers_1 = require(\"../utils/helpers\");\n\nvar localStorage_1 = __importDefault(require(\"../utils/localStorage\"));\n\nvar metamask_1 = require(\"../utils/metamask\");\n/**\n * Connectors are our link between a DApp and the users wallet. Each\n * wallet has different semantics and these classes attempt to unify\n * them and present a workable API.\n */\n\n\nvar UnauthenticatedConnector =\n/** @class */\nfunction () {\n  function UnauthenticatedConnector(n) {\n    this.initialised = true;\n    this.type = constants_1.WalletTypes.Unauthenticated;\n    this.account = null;\n    this.feeCurrency = contractkit_1.CeloContract.GoldToken;\n    this.kit = (0, contractkit_1.newKit)(n.rpcUrl);\n  }\n\n  UnauthenticatedConnector.prototype.initialise = function () {\n    this.initialised = true;\n    return this;\n  };\n\n  UnauthenticatedConnector.prototype.updateFeeCurrency = function (feeContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.feeCurrency = feeContract;\n            return [4\n            /*yield*/\n            , this.kit.setFeeCurrency(feeContract)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  UnauthenticatedConnector.prototype.close = function () {\n    (0, helpers_1.clearPreviousConfig)();\n    return;\n  };\n\n  return UnauthenticatedConnector;\n}();\n\nexports.UnauthenticatedConnector = UnauthenticatedConnector;\n\nvar PrivateKeyConnector =\n/** @class */\nfunction () {\n  function PrivateKeyConnector(n, privateKey, feeCurrency) {\n    var _a;\n\n    this.feeCurrency = feeCurrency;\n    this.initialised = true;\n    this.type = constants_1.WalletTypes.PrivateKey;\n    this.account = null;\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletType, constants_1.WalletTypes.PrivateKey);\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletArguments, JSON.stringify([privateKey]));\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedNetwork, n.name);\n    var wallet = new wallet_local_1.LocalWallet();\n    wallet.addAccount(privateKey);\n    this.kit = (0, contractkit_1.newKit)(n.rpcUrl, wallet);\n    this.kit.defaultAccount = wallet.getAccounts()[0];\n    this.account = (_a = this.kit.defaultAccount) !== null && _a !== void 0 ? _a : null;\n  }\n\n  PrivateKeyConnector.prototype.initialise = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.updateFeeCurrency(this.feeCurrency)];\n\n          case 1:\n            _a.sent();\n\n            this.initialised = true;\n            return [2\n            /*return*/\n            , this];\n        }\n      });\n    });\n  };\n\n  PrivateKeyConnector.prototype.updateFeeCurrency = function (feeContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.feeCurrency = feeContract;\n            return [4\n            /*yield*/\n            , this.kit.setFeeCurrency(feeContract)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  PrivateKeyConnector.prototype.close = function () {\n    (0, helpers_1.clearPreviousConfig)();\n    return;\n  };\n\n  return PrivateKeyConnector;\n}();\n\nexports.PrivateKeyConnector = PrivateKeyConnector;\n\nvar LedgerConnector =\n/** @class */\nfunction () {\n  function LedgerConnector(network, index, feeCurrency) {\n    this.network = network;\n    this.index = index;\n    this.feeCurrency = feeCurrency;\n    this.initialised = false;\n    this.type = constants_1.WalletTypes.Ledger;\n    this.account = null;\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletType, constants_1.WalletTypes.Ledger);\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletArguments, JSON.stringify([index]));\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedNetwork, network.name);\n    this.kit = (0, contractkit_1.newKit)(network.rpcUrl);\n  }\n\n  LedgerConnector.prototype.initialise = function () {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function () {\n      var TransportUSB, newLedgerWalletWithSetup, transport, wallet;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Promise.resolve().then(function () {\n              return __importStar(require('@ledgerhq/hw-transport-webusb'));\n            })];\n\n          case 1:\n            TransportUSB = _b.sent().default;\n            return [4\n            /*yield*/\n            , Promise.resolve().then(function () {\n              return __importStar(require('@celo/wallet-ledger'));\n            })];\n\n          case 2:\n            newLedgerWalletWithSetup = _b.sent().newLedgerWalletWithSetup;\n            return [4\n            /*yield*/\n            , TransportUSB.create()];\n\n          case 3:\n            transport = _b.sent();\n            return [4\n            /*yield*/\n            , newLedgerWalletWithSetup(transport, [this.index])];\n\n          case 4:\n            wallet = _b.sent();\n            this.kit = (0, contractkit_1.newKit)(this.network.rpcUrl, wallet);\n            this.kit.defaultAccount = wallet.getAccounts()[0];\n            this.initialised = true;\n            this.account = (_a = this.kit.defaultAccount) !== null && _a !== void 0 ? _a : null;\n            return [4\n            /*yield*/\n            , this.updateFeeCurrency(this.feeCurrency)];\n\n          case 5:\n            _b.sent();\n\n            return [2\n            /*return*/\n            , this];\n        }\n      });\n    });\n  };\n\n  LedgerConnector.prototype.updateFeeCurrency = function (feeContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.feeCurrency = feeContract;\n            if (!this.feeCurrency) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this.kit.setFeeCurrency(feeContract)];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  LedgerConnector.prototype.close = function () {\n    (0, helpers_1.clearPreviousConfig)();\n    return;\n  };\n\n  return LedgerConnector;\n}();\n\nexports.LedgerConnector = LedgerConnector;\n\nvar UnsupportedChainIdError =\n/** @class */\nfunction (_super) {\n  __extends(UnsupportedChainIdError, _super);\n\n  function UnsupportedChainIdError(chainID) {\n    var _this = _super.call(this, \"Unsupported chain ID: \".concat(chainID)) || this;\n\n    _this.chainID = chainID;\n    _this.name = UnsupportedChainIdError.NAME;\n    return _this;\n  }\n\n  UnsupportedChainIdError.NAME = 'UnsupportedChainIdError';\n  return UnsupportedChainIdError;\n}(Error);\n\nexports.UnsupportedChainIdError = UnsupportedChainIdError;\n\nvar InjectedConnector =\n/** @class */\nfunction () {\n  function InjectedConnector(network, feeCurrency, defaultType) {\n    var _this = this;\n\n    if (defaultType === void 0) {\n      defaultType = constants_1.WalletTypes.Injected;\n    }\n\n    this.feeCurrency = feeCurrency;\n    this.initialised = false;\n    this.type = constants_1.WalletTypes.CeloExtensionWallet;\n    this.account = null;\n\n    this.onChainChanged = function (chainIdHex) {\n      var chainId = parseInt(chainIdHex, 16);\n\n      if (_this.onNetworkChangeCallback && _this.network.chainId !== chainId) {\n        _this.onNetworkChangeCallback(chainId);\n      }\n    };\n\n    this.onAccountsChanged = function (accounts) {\n      var _a;\n\n      if (_this.onAddressChangeCallback) {\n        _this.kit.defaultAccount = accounts[0];\n\n        _this.onAddressChangeCallback((_a = accounts[0]) !== null && _a !== void 0 ? _a : null);\n      }\n    };\n\n    this.type = defaultType;\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletType, defaultType);\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletArguments, JSON.stringify([]));\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedNetwork, network.name);\n    this.kit = (0, contractkit_1.newKit)(network.rpcUrl);\n    this.network = network;\n  }\n\n  InjectedConnector.prototype.initialise = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var injected, web3, ethereum, isMetaMask, _a, defaultAccount;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , (0, ethereum_1.getInjectedEthereum)()];\n\n          case 1:\n            injected = _b.sent();\n\n            if (!injected) {\n              throw new Error('Ethereum wallet not installed');\n            }\n\n            web3 = injected.web3, ethereum = injected.ethereum, isMetaMask = injected.isMetaMask;\n            this.type = isMetaMask ? constants_1.WalletTypes.MetaMask : constants_1.WalletTypes.Injected;\n            return [4\n            /*yield*/\n            , ethereum.request({\n              method: 'eth_requestAccounts'\n            })];\n\n          case 2:\n            void _b.sent();\n            ethereum.removeListener('chainChanged', this.onChainChanged);\n            ethereum.removeListener('accountsChanged', this.onAccountsChanged);\n            return [4\n            /*yield*/\n            , (0, metamask_1.switchToCeloNetwork)(this.kit, this.network, ethereum)];\n\n          case 3:\n            _b.sent();\n\n            ethereum.on('chainChanged', this.onChainChanged);\n            ethereum.on('accountsChanged', this.onAccountsChanged);\n            this.kit = (0, contractkit_1.newKitFromWeb3)(web3);\n            return [4\n            /*yield*/\n            , this.kit.web3.eth.getAccounts()];\n\n          case 4:\n            _a = __read.apply(void 0, [_b.sent(), 1]), defaultAccount = _a[0];\n            this.kit.defaultAccount = defaultAccount;\n            this.account = defaultAccount !== null && defaultAccount !== void 0 ? defaultAccount : null;\n            return [4\n            /*yield*/\n            , this.updateFeeCurrency(this.feeCurrency)];\n\n          case 5:\n            _b.sent();\n\n            this.initialised = true;\n            return [2\n            /*return*/\n            , this];\n        }\n      });\n    });\n  };\n\n  InjectedConnector.prototype.updateFeeCurrency = function (feeContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.feeCurrency = feeContract;\n            return [4\n            /*yield*/\n            , this.kit.setFeeCurrency(feeContract)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  InjectedConnector.prototype.updateKitWithNetwork = function (network) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedNetwork, network.name);\n            return [4\n            /*yield*/\n            , this.initialise()];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  InjectedConnector.prototype.onNetworkChange = function (callback) {\n    this.onNetworkChangeCallback = callback;\n  };\n\n  InjectedConnector.prototype.onAddressChange = function (callback) {\n    this.onAddressChangeCallback = callback;\n  };\n\n  InjectedConnector.prototype.close = function () {\n    (0, helpers_1.clearPreviousConfig)();\n    var ethereum = (0, ethereum_1.getEthereum)();\n\n    if (ethereum) {\n      ethereum.removeListener('chainChanged', this.onChainChanged);\n      ethereum.removeListener('accountsChanged', this.onAccountsChanged);\n    }\n\n    this.onNetworkChangeCallback = undefined;\n    this.onAddressChangeCallback = undefined;\n    return;\n  };\n\n  return InjectedConnector;\n}();\n\nexports.InjectedConnector = InjectedConnector;\n\nvar MetaMaskConnector =\n/** @class */\nfunction (_super) {\n  __extends(MetaMaskConnector, _super);\n\n  function MetaMaskConnector(network, feeCurrency) {\n    return _super.call(this, network, feeCurrency, constants_1.WalletTypes.MetaMask) || this;\n  }\n\n  return MetaMaskConnector;\n}(InjectedConnector);\n\nexports.MetaMaskConnector = MetaMaskConnector;\n\nvar CeloExtensionWalletConnector =\n/** @class */\nfunction () {\n  function CeloExtensionWalletConnector(network, feeCurrency) {\n    this.feeCurrency = feeCurrency;\n    this.initialised = false;\n    this.type = constants_1.WalletTypes.CeloExtensionWallet;\n    this.account = null;\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletType, constants_1.WalletTypes.CeloExtensionWallet);\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletArguments, JSON.stringify([feeCurrency]));\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedNetwork, network.name);\n    this.kit = (0, contractkit_1.newKit)(network.rpcUrl);\n  }\n\n  CeloExtensionWalletConnector.prototype.initialise = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var Web3, celo, web3, _a, defaultAccount;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Promise.resolve().then(function () {\n              return __importStar(require('web3'));\n            })];\n\n          case 1:\n            Web3 = _b.sent().default;\n            celo = window.celo;\n\n            if (!celo) {\n              throw new Error('Celo Extension Wallet not installed');\n            }\n\n            web3 = new Web3(celo);\n            return [4\n            /*yield*/\n            , celo.enable()];\n\n          case 2:\n            _b.sent();\n\n            web3.currentProvider.publicConfigStore.on('update', function (_a) {\n              var networkVersion = _a.networkVersion;\n\n              if (_this.onNetworkChangeCallback) {\n                _this.onNetworkChangeCallback(networkVersion);\n              }\n            });\n            this.kit = (0, contractkit_1.newKitFromWeb3)(web3);\n            return [4\n            /*yield*/\n            , this.kit.web3.eth.getAccounts()];\n\n          case 3:\n            _a = __read.apply(void 0, [_b.sent(), 1]), defaultAccount = _a[0];\n            this.kit.defaultAccount = defaultAccount;\n            this.account = defaultAccount !== null && defaultAccount !== void 0 ? defaultAccount : null;\n            return [4\n            /*yield*/\n            , this.updateFeeCurrency(this.feeCurrency)];\n\n          case 4:\n            _b.sent();\n\n            this.initialised = true;\n            return [2\n            /*return*/\n            , this];\n        }\n      });\n    });\n  };\n\n  CeloExtensionWalletConnector.prototype.updateFeeCurrency = function (feeContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.feeCurrency = feeContract;\n            return [4\n            /*yield*/\n            , this.kit.setFeeCurrency(this.feeCurrency)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  CeloExtensionWalletConnector.prototype.onNetworkChange = function (callback) {\n    this.onNetworkChangeCallback = callback;\n  };\n\n  CeloExtensionWalletConnector.prototype.close = function () {\n    (0, helpers_1.clearPreviousConfig)();\n    return;\n  };\n\n  return CeloExtensionWalletConnector;\n}();\n\nexports.CeloExtensionWalletConnector = CeloExtensionWalletConnector;\n\nvar WalletConnectConnector =\n/** @class */\nfunction () {\n  function WalletConnectConnector(network, feeCurrency, // options: WalletConnectWalletOptions | WalletConnectWalletOptionsV1,\n  options, autoOpen, getDeeplinkUrl, version) {\n    if (autoOpen === void 0) {\n      autoOpen = false;\n    }\n\n    this.network = network;\n    this.feeCurrency = feeCurrency;\n    this.autoOpen = autoOpen;\n    this.getDeeplinkUrl = getDeeplinkUrl;\n    this.version = version;\n    this.initialised = false;\n    this.type = constants_1.WalletTypes.WalletConnect;\n    this.account = null;\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletType, constants_1.WalletTypes.WalletConnect);\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedWalletArguments, JSON.stringify([options]));\n    localStorage_1.default.setItem(constants_1.localStorageKeys.lastUsedNetwork, network.name);\n    var wallet = new wallet_walletconnect_v1_1.WalletConnectWallet(options); // Uncomment with WCV2 support\n    // version == 1\n    //   ? new WalletConnectWalletV1(options as WalletConnectWalletOptionsV1)\n    //   : new WalletConnectWallet(options as WalletConnectWalletOptions);\n\n    this.kit = (0, contractkit_1.newKit)(network.rpcUrl, wallet);\n    this.version = version;\n  }\n\n  WalletConnectConnector.prototype.onUri = function (callback) {\n    this.onUriCallback = callback;\n  };\n\n  WalletConnectConnector.prototype.onClose = function (callback) {\n    this.onCloseCallback = callback;\n  };\n\n  WalletConnectConnector.prototype.initialise = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var wallet, uri, deepLink, _a, address, defaultAccount;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            wallet = this.kit.getWallet();\n\n            if (this.onCloseCallback) {\n              // Uncomment with WCV2 support\n              // wallet.onPairingDeleted = () => this.onCloseCallback?.();\n              wallet.onSessionDeleted = function () {\n                var _a;\n\n                return (_a = _this.onCloseCallback) === null || _a === void 0 ? void 0 : _a.call(_this);\n              };\n            }\n\n            return [4\n            /*yield*/\n            , wallet.getUri()];\n\n          case 1:\n            uri = _b.sent();\n\n            if (uri && this.onUriCallback) {\n              this.onUriCallback(uri);\n            }\n\n            if (uri && this.autoOpen) {\n              deepLink = this.getDeeplinkUrl ? this.getDeeplinkUrl(uri) : uri;\n              location.href = deepLink;\n            }\n\n            return [4\n            /*yield*/\n            , wallet.init()];\n\n          case 2:\n            _b.sent();\n\n            _a = __read(wallet.getAccounts(), 1), address = _a[0];\n            return [4\n            /*yield*/\n            , this.fetchWalletAddressForAccount(address)];\n\n          case 3:\n            defaultAccount = _b.sent();\n            this.kit.defaultAccount = defaultAccount;\n            this.account = defaultAccount !== null && defaultAccount !== void 0 ? defaultAccount : null;\n            return [4\n            /*yield*/\n            , this.updateFeeCurrency(this.feeCurrency)];\n\n          case 4:\n            _b.sent();\n\n            this.initialised = true;\n            return [2\n            /*return*/\n            , this];\n        }\n      });\n    });\n  };\n\n  WalletConnectConnector.prototype.fetchWalletAddressForAccount = function (address) {\n    return __awaiter(this, void 0, void 0, function () {\n      var accounts, walletAddress;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!address) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            return [4\n            /*yield*/\n            , this.kit.contracts.getAccounts()];\n\n          case 1:\n            accounts = _a.sent();\n            return [4\n            /*yield*/\n            , accounts.getWalletAddress(address)];\n\n          case 2:\n            walletAddress = _a.sent();\n            return [2\n            /*return*/\n            , new bignumber_js_1.BigNumber(walletAddress).isZero() ? address : walletAddress];\n        }\n      });\n    });\n  };\n\n  WalletConnectConnector.prototype.updateFeeCurrency = function (feeContract) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.feeCurrency = feeContract;\n            return [4\n            /*yield*/\n            , this.kit.setFeeCurrency(feeContract)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  WalletConnectConnector.prototype.close = function () {\n    (0, helpers_1.clearPreviousConfig)();\n    var wallet = this.kit.getWallet();\n    return wallet.close();\n  };\n\n  return WalletConnectConnector;\n}();\n\nexports.WalletConnectConnector = WalletConnectConnector;","map":{"version":3,"mappings":"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","names":["n","constants_1","Unauthenticated","contractkit_1","GoldToken","kit","rpcUrl","UnauthenticatedConnector","initialised","feeContract","feeCurrency","setFeeCurrency","_a","exports","privateKey","PrivateKey","localStorage_1","setItem","lastUsedWalletType","lastUsedWalletArguments","JSON","stringify","lastUsedNetwork","name","wallet","wallet_local_1","addAccount","defaultAccount","getAccounts","account","PrivateKeyConnector","updateFeeCurrency","network","index","Ledger","LedgerConnector","TransportUSB","_b","default","newLedgerWalletWithSetup","create","transport","__extends","chainID","_super","_this","UnsupportedChainIdError","NAME","Error","defaultType","Injected","CeloExtensionWallet","chainIdHex","chainId","parseInt","onNetworkChangeCallback","accounts","onAddressChangeCallback","type","InjectedConnector","injected","web3","ethereum","isMetaMask","MetaMask","request","method","removeListener","onChainChanged","onAccountsChanged","on","eth","initialise","callback","undefined","CeloExtensionWalletConnector","Web3","celo","window","enable","currentProvider","publicConfigStore","networkVersion","options","autoOpen","getDeeplinkUrl","version","WalletConnect","wallet_walletconnect_v1_1","WalletConnectConnector","onUriCallback","onCloseCallback","getWallet","onSessionDeleted","getUri","uri","deepLink","location","href","init","address","fetchWalletAddressForAccount","contracts","getWalletAddress","walletAddress","bignumber_js_1","isZero","close"],"sourceRoot":"","sources":["../../src/connectors/connectors.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}