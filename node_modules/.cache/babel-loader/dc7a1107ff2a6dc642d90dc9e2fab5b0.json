{"ast":null,"code":"var _jsxFileName = \"/Users/crypto/GETSCHWIFTY/src/pages/home/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Nfts, Header } from '../../components';\nimport { useContractKit } from \"@celo-tools/use-contractkit\";\nimport { useMarketContract } from \"../../hooks/useMarketContract\";\nimport axios from \"axios\";\nimport { ethers } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const {\n    address,\n    connect,\n    performActions\n  } = useContractKit();\n  const marketplace = useMarketContract();\n  const [nfts, setNfts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (marketplace) loadNFTs();\n  }, [marketplace]);\n\n  const loadNFTs = async () => {\n    try {\n      const data = await marketplace.methods.fetchMarketItems().call();\n      const items = await Promise.all(data.map(async i => {\n        const tokenUri = await marketplace.methods.tokenURI(i.tokenId).call();\n        const meta = await axios.get(tokenUri);\n        let price = ethers.utils.formatUnits(i.price.toString(), 'ether');\n        return {\n          price,\n          tokenId: Number(i.tokenId),\n          seller: i.seller,\n          owner: i.owner,\n          image: meta.data.image,\n          name: meta.data.name\n        };\n      }));\n      setNfts(items);\n      setLoading(false);\n    } catch (e) {\n      console.log({\n        e\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Nfts, {\n      nfts: nfts,\n      title: \"One Stop Shop\",\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 11\n  }, this);\n};\n\n_s(Home, \"mEjTcKyjbJ0s+PbBwaqcucsE2mY=\", false, function () {\n  return [useContractKit, useMarketContract];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/crypto/GETSCHWIFTY/src/pages/home/Home.jsx"],"names":["React","useEffect","useState","Nfts","Header","useContractKit","useMarketContract","axios","ethers","Home","address","connect","performActions","marketplace","nfts","setNfts","loading","setLoading","loadNFTs","data","methods","fetchMarketItems","call","items","Promise","all","map","i","tokenUri","tokenURI","tokenId","meta","get","price","utils","formatUnits","toString","Number","seller","owner","image","name","e","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,IAAR,EAAcC,MAAd,QAA6B,kBAA7B;AACA,SAAQC,cAAR,QAA6B,6BAA7B;AACA,SAAQC,iBAAR,QAAgC,+BAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,QAAqB,QAArB;;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AAEf,QAAM;AAACC,IAAAA,OAAD;AAAUC,IAAAA,OAAV;AAAmBC,IAAAA;AAAnB,MAAqCP,cAAc,EAAzD;AACA,QAAMQ,WAAW,GAAGP,iBAAiB,EAArC;AAGA,QAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGY,WAAH,EAAgBK,QAAQ;AAC3B,GAFQ,EAEN,CAACL,WAAD,CAFM,CAAT;;AAGA,QAAMK,QAAQ,GAAG,YAAY;AACzB,QAAI;AACA,YAAMC,IAAI,GAAG,MAAMN,WAAW,CAACO,OAAZ,CAAoBC,gBAApB,GAAuCC,IAAvC,EAAnB;AACA,YAAMC,KAAK,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACO,GAAL,CAAS,MAAMC,CAAN,IAAW;AAChD,cAAMC,QAAQ,GAAG,MAAMf,WAAW,CAACO,OAAZ,CAAoBS,QAApB,CAA6BF,CAAC,CAACG,OAA/B,EAAwCR,IAAxC,EAAvB;AACA,cAAMS,IAAI,GAAG,MAAMxB,KAAK,CAACyB,GAAN,CAAUJ,QAAV,CAAnB;AACA,YAAIK,KAAK,GAAGzB,MAAM,CAAC0B,KAAP,CAAaC,WAAb,CAAyBR,CAAC,CAACM,KAAF,CAAQG,QAAR,EAAzB,EAA6C,OAA7C,CAAZ;AACA,eAAO;AACHH,UAAAA,KADG;AAEHH,UAAAA,OAAO,EAAEO,MAAM,CAACV,CAAC,CAACG,OAAH,CAFZ;AAGHQ,UAAAA,MAAM,EAAEX,CAAC,CAACW,MAHP;AAIHC,UAAAA,KAAK,EAAEZ,CAAC,CAACY,KAJN;AAKHC,UAAAA,KAAK,EAAET,IAAI,CAACZ,IAAL,CAAUqB,KALd;AAMHC,UAAAA,IAAI,EAAEV,IAAI,CAACZ,IAAL,CAAUsB;AANb,SAAP;AAQH,OAZ+B,CAAZ,CAApB;AAcA1B,MAAAA,OAAO,CAACQ,KAAD,CAAP;AACAN,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAlBD,CAkBC,OAAOyB,CAAP,EAAU;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACF,QAAAA;AAAD,OAAZ;AACH,KApBD,SAoBS;AACLzB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AAEJ,GAzBD;;AA2BF,sBAAQ;AAAA,2BAGP,QAAC,IAAD;AAAM,MAAA,IAAI,EAAEH,IAAZ;AAAkB,MAAA,KAAK,EAAC,eAAxB;AAAwC,MAAA,OAAO,EAAEE;AAAjD;AAAA;AAAA;AAAA;AAAA;AAHO;AAAA;AAAA;AAAA;AAAA,UAAR;AAKD,CA5CD;;GAAMP,I;UAEyCJ,c,EACvBC,iB;;;KAHlBG,I;AA8CN,eAAeA,IAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {Nfts, Header, } from '../../components'\nimport {useContractKit} from \"@celo-tools/use-contractkit\";\nimport {useMarketContract} from \"../../hooks/useMarketContract\";\nimport axios from \"axios\";\nimport {ethers} from \"ethers\";\n\nconst Home = () => {\n\n    const {address, connect, performActions} = useContractKit()\n    const marketplace = useMarketContract()\n\n\n    const [nfts, setNfts] = useState([])\n    const [loading, setLoading] = useState(true)\n\n    useEffect(() => {\n        if(marketplace) loadNFTs()\n    }, [marketplace])\n    const loadNFTs = async ()  =>{\n        try {\n            const data = await marketplace.methods.fetchMarketItems().call()\n            const items = await Promise.all(data.map(async i => {\n                const tokenUri = await marketplace.methods.tokenURI(i.tokenId).call()\n                const meta = await axios.get(tokenUri)\n                let price = ethers.utils.formatUnits(i.price.toString(), 'ether')\n                return {\n                    price,\n                    tokenId: Number(i.tokenId),\n                    seller: i.seller,\n                    owner: i.owner,\n                    image: meta.data.image,\n                    name: meta.data.name\n                }\n            }))\n\n            setNfts(items)\n            setLoading(false)\n        }catch (e) {\n            console.log({e})\n        }finally {\n            setLoading(false)\n        }\n\n    }\n\n  return  <div>\n    \n   \n   <Nfts nfts={nfts} title=\"One Stop Shop\" loading={loading}  />\n  </div>;\n};\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}