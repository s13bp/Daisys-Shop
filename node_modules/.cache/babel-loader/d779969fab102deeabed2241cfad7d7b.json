{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GovernanceWrapper = exports.hotfixToParams = exports.VoteValue = exports.proposalToParams = exports.ProposalStage = void 0;\n\nvar address_1 = require(\"@celo/base/lib/address\");\n\nvar async_1 = require(\"@celo/base/lib/async\");\n\nvar collections_1 = require(\"@celo/base/lib/collections\");\n\nvar connect_1 = require(\"@celo/connect\");\n\nvar fixidity_1 = require(\"@celo/utils/lib/fixidity\");\n\nvar bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nvar BaseWrapper_1 = require(\"./BaseWrapper\");\n\nvar ProposalStage;\n\n(function (ProposalStage) {\n  ProposalStage[\"None\"] = \"None\";\n  ProposalStage[\"Queued\"] = \"Queued\";\n  ProposalStage[\"Approval\"] = \"Approval\";\n  ProposalStage[\"Referendum\"] = \"Referendum\";\n  ProposalStage[\"Execution\"] = \"Execution\";\n  ProposalStage[\"Expiration\"] = \"Expiration\";\n})(ProposalStage = exports.ProposalStage || (exports.ProposalStage = {}));\n\nvar proposalToParams = function proposalToParams(proposal, descriptionURL) {\n  var data = proposal.map(function (tx) {\n    return (0, address_1.hexToBuffer)(tx.input);\n  });\n  return [proposal.map(function (tx) {\n    return tx.value;\n  }), proposal.map(function (tx) {\n    return tx.to;\n  }), (0, BaseWrapper_1.bufferToSolidityBytes)(Buffer.concat(data)), data.map(function (inp) {\n    return inp.length;\n  }), descriptionURL];\n};\n\nexports.proposalToParams = proposalToParams;\nvar VoteValue;\n\n(function (VoteValue) {\n  VoteValue[\"None\"] = \"NONE\";\n  VoteValue[\"Abstain\"] = \"Abstain\";\n  VoteValue[\"No\"] = \"No\";\n  VoteValue[\"Yes\"] = \"Yes\";\n})(VoteValue = exports.VoteValue || (exports.VoteValue = {}));\n\nvar hotfixToParams = function hotfixToParams(proposal, salt) {\n  var p = (0, exports.proposalToParams)(proposal, ''); // no description URL for hotfixes\n\n  return [p[0], p[1], p[2], p[3], (0, address_1.bufferToHex)(salt)];\n};\n\nexports.hotfixToParams = hotfixToParams;\nvar ZERO_BN = new bignumber_js_1.default(0);\n/**\n * Contract managing voting for governance proposals.\n */\n\nvar GovernanceWrapper =\n/** @class */\nfunction (_super) {\n  __extends(GovernanceWrapper, _super);\n\n  function GovernanceWrapper() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * Querying number of possible concurrent proposals.\n     * @returns Current number of possible concurrent proposals.\n     */\n\n\n    _this.concurrentProposals = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.concurrentProposals, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query time of last proposal dequeue\n     * @returns Time of last dequeue\n     */\n\n    _this.lastDequeue = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.lastDequeue, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query proposal dequeue frequency.\n     * @returns Current proposal dequeue frequency in seconds.\n     */\n\n    _this.dequeueFrequency = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.dequeueFrequency, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query minimum deposit required to make a proposal.\n     * @returns Current minimum deposit.\n     */\n\n    _this.minDeposit = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.minDeposit, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Query queue expiry parameter.\n     * @return The number of seconds a proposal can stay in the queue before expiring.\n     */\n\n    _this.queueExpiry = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.queueExpiry, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Returns whether or not a particular account is voting on proposals.\n     * @param account The address of the account.\n     * @returns Whether or not the account is voting on proposals.\n     */\n\n    _this.isVoting = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isVoting);\n    /**\n     * Returns the metadata associated with a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.getProposalMetadata = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getProposal, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), function (res) {\n      return {\n        proposer: res[0],\n        deposit: (0, BaseWrapper_1.valueToBigNumber)(res[1]),\n        timestamp: (0, BaseWrapper_1.valueToBigNumber)(res[2]),\n        transactionCount: (0, BaseWrapper_1.valueToInt)(res[3]),\n        descriptionURL: res[4]\n      };\n    });\n    /**\n     * Returns the transaction at the given index associated with a given proposal.\n     * @param proposalID Governance proposal UUID\n     * @param txIndex Transaction index\n     */\n\n    _this.getProposalTransaction = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getProposalTransaction, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString, BaseWrapper_1.valueToString), function (res) {\n      return {\n        value: res[0],\n        to: res[1],\n        input: (0, BaseWrapper_1.solidityBytesToString)(res[2])\n      };\n    });\n    /**\n     * Returns whether a given proposal is approved.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.isApproved = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isApproved, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns whether a dequeued proposal is expired.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.isDequeuedProposalExpired = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isDequeuedProposalExpired, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns whether a dequeued proposal is expired.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.isQueuedProposalExpired = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isQueuedProposalExpired, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns the approver address for proposals and hotfixes.\n     */\n\n    _this.getApprover = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.approver);\n    /**\n     * Returns the approver multisig contract for proposals and hotfixes.\n     */\n\n    _this.getApproverMultisig = function () {\n      return _this.getApprover().then(function (address) {\n        return _this.kit.contracts.getMultiSig(address);\n      });\n    };\n\n    _this.getProposalStage = function (proposalID) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var queue, existsInQueue, expired, res;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , this.getQueue()];\n\n            case 1:\n              queue = _a.sent();\n              existsInQueue = queue.find(function (u) {\n                return u.proposalID === proposalID;\n              }) !== undefined;\n              if (!existsInQueue) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , this.isQueuedProposalExpired(proposalID)];\n\n            case 2:\n              expired = _a.sent();\n              return [2\n              /*return*/\n              , expired ? ProposalStage.Expiration : ProposalStage.Queued];\n\n            case 3:\n              return [4\n              /*yield*/\n              , this.contract.methods.getProposalStage((0, BaseWrapper_1.valueToString)(proposalID)).call()];\n\n            case 4:\n              res = _a.sent();\n              return [2\n              /*return*/\n              , Object.keys(ProposalStage)[(0, BaseWrapper_1.valueToInt)(res)]];\n          }\n        });\n      });\n    };\n    /**\n     * Returns whether a given proposal is passing relative to the constitution's threshold.\n     * @param proposalID Governance proposal UUID\n     */\n\n\n    _this.isProposalPassing = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isProposalPassing, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Withdraws refunded proposal deposits.\n     */\n\n    _this.withdraw = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.withdraw);\n    /**\n     * Submits a new governance proposal.\n     * @param proposal Governance proposal\n     * @param descriptionURL A URL where further information about the proposal can be viewed\n     */\n\n    _this.propose = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.propose, exports.proposalToParams);\n    /**\n     * Returns whether a governance proposal exists with the given ID.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.proposalExists = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.proposalExists, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns the current upvoted governance proposal ID and applied vote weight (zeroes if none).\n     * @param upvoter Address of upvoter\n     */\n\n    _this.getUpvoteRecord = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getUpvoteRecord, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.identity), function (o) {\n      return {\n        proposalID: (0, BaseWrapper_1.valueToBigNumber)(o[0]),\n        upvotes: (0, BaseWrapper_1.valueToBigNumber)(o[1])\n      };\n    });\n    /**\n     * Returns whether a given proposal is queued.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.isQueued = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isQueued, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString));\n    /**\n     * Returns the value of proposal deposits that have been refunded.\n     * @param proposer Governance proposer address.\n     */\n\n    _this.getRefundedDeposits = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.refundedDeposits, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.stringIdentity), BaseWrapper_1.valueToBigNumber);\n    /*\n     * Returns the upvotes applied to a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.getUpvotes = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getUpvotes, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), BaseWrapper_1.valueToBigNumber);\n    /**\n     * Returns the yes, no, and abstain votes applied to a given proposal.\n     * @param proposalID Governance proposal UUID\n     */\n\n    _this.getVotes = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getVoteTotals, (0, BaseWrapper_1.tupleParser)(BaseWrapper_1.valueToString), function (res) {\n      var _a;\n\n      return _a = {}, _a[VoteValue.Yes] = (0, BaseWrapper_1.valueToBigNumber)(res[0]), _a[VoteValue.No] = (0, BaseWrapper_1.valueToBigNumber)(res[1]), _a[VoteValue.Abstain] = (0, BaseWrapper_1.valueToBigNumber)(res[2]), _a;\n    });\n    /**\n     * Returns the proposal queue as list of upvote records.\n     */\n\n    _this.getQueue = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.getQueue, undefined, function (arraysObject) {\n      return (0, collections_1.zip)(function (_id, _upvotes) {\n        return {\n          proposalID: (0, BaseWrapper_1.valueToBigNumber)(_id),\n          upvotes: (0, BaseWrapper_1.valueToBigNumber)(_upvotes)\n        };\n      }, arraysObject[0], arraysObject[1]);\n    });\n    /**\n     * Dequeues any queued proposals if `dequeueFrequency` seconds have elapsed since the last dequeue\n     */\n\n    _this.dequeueProposalsIfReady = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.dequeueProposalsIfReady);\n    _this.revokeVotes = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.revokeVotes);\n    /**\n     * Returns whether a given hotfix has been whitelisted by a given address.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     * @param whitelister address of whitelister\n     */\n\n    _this.isHotfixWhitelistedBy = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isHotfixWhitelistedBy, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex, function (s) {\n      return (0, BaseWrapper_1.identity)(s);\n    }));\n    /**\n     * Returns whether a given hotfix can be passed.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n\n    _this.isHotfixPassing = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.isHotfixPassing, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Returns the number of validators required to reach a Byzantine quorum\n     */\n\n    _this.minQuorumSize = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.minQuorumSizeInCurrentSet, undefined, BaseWrapper_1.valueToBigNumber);\n    /**\n     * Returns the number of validators that whitelisted the hotfix\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n\n    _this.hotfixWhitelistValidatorTally = (0, BaseWrapper_1.proxyCall)(_this.contract.methods.hotfixWhitelistValidatorTally, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Marks the given hotfix whitelisted by `sender`.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n\n    _this.whitelistHotfix = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.whitelistHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Marks the given hotfix approved by `sender`.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     * @notice Only the `approver` address will succeed in sending this transaction\n     */\n\n    _this.approveHotfix = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.approveHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Marks the given hotfix prepared for current epoch if quorum of validators have whitelisted it.\n     * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n     */\n\n    _this.prepareHotfix = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.prepareHotfix, (0, BaseWrapper_1.tupleParser)(address_1.bufferToHex));\n    /**\n     * Executes a given sequence of transactions if the corresponding hash is prepared and approved.\n     * @param hotfix Governance hotfix proposal\n     * @param salt Secret which guarantees uniqueness of hash\n     * @notice keccak256 hash of abi encoded transactions computed on-chain\n     */\n\n    _this.executeHotfix = (0, BaseWrapper_1.proxySend)(_this.kit, _this.contract.methods.executeHotfix, exports.hotfixToParams);\n    return _this;\n  }\n  /**\n   * Query durations of different stages in proposal lifecycle.\n   * @returns Durations for approval, referendum and execution stages in seconds.\n   */\n\n\n  GovernanceWrapper.prototype.stageDurations = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contract.methods.stageDurations().call()];\n\n          case 1:\n            res = _b.sent();\n            return [2\n            /*return*/\n            , (_a = {}, _a[ProposalStage.Approval] = (0, BaseWrapper_1.valueToBigNumber)(res[0]), _a[ProposalStage.Referendum] = (0, BaseWrapper_1.valueToBigNumber)(res[1]), _a[ProposalStage.Execution] = (0, BaseWrapper_1.valueToBigNumber)(res[2]), _a)];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the required ratio of yes:no votes needed to exceed in order to pass the proposal transaction.\n   * @param tx Transaction to determine the constitution for running.\n   */\n\n\n  GovernanceWrapper.prototype.getTransactionConstitution = function (tx) {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function () {\n      var callSignature, value;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            callSignature = (0, address_1.ensureLeading0x)((0, address_1.trimLeading0x)(tx.input).slice(0, 8));\n            return [4\n            /*yield*/\n            , this.contract.methods.getConstitution((_a = tx.to) !== null && _a !== void 0 ? _a : address_1.NULL_ADDRESS, callSignature).call()];\n\n          case 1:\n            value = _b.sent();\n            return [2\n            /*return*/\n            , (0, fixidity_1.fromFixed)(new bignumber_js_1.default(value))];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the required ratio of yes:no votes needed to exceed in order to pass the proposal.\n   * @param proposal Proposal to determine the constitution for running.\n   */\n\n\n  GovernanceWrapper.prototype.getConstitution = function (proposal) {\n    return __awaiter(this, void 0, void 0, function () {\n      var constitution, _i, proposal_1, tx, _a, _b;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            constitution = new bignumber_js_1.default(0);\n            _i = 0, proposal_1 = proposal;\n            _c.label = 1;\n\n          case 1:\n            if (!(_i < proposal_1.length)) return [3\n            /*break*/\n            , 4];\n            tx = proposal_1[_i];\n            _b = (_a = bignumber_js_1.default).max;\n            return [4\n            /*yield*/\n            , this.getTransactionConstitution(tx)];\n\n          case 2:\n            constitution = _b.apply(_a, [_c.sent(), constitution]);\n            _c.label = 3;\n\n          case 3:\n            _i++;\n            return [3\n            /*break*/\n            , 1];\n\n          case 4:\n            return [2\n            /*return*/\n            , constitution];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the participation parameters.\n   * @returns The participation parameters.\n   */\n\n\n  GovernanceWrapper.prototype.getParticipationParameters = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contract.methods.getParticipationParameters().call()];\n\n          case 1:\n            res = _a.sent();\n            return [2\n            /*return*/\n            , {\n              baseline: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[0])),\n              baselineFloor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[1])),\n              baselineUpdateFactor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[2])),\n              baselineQuorumFactor: (0, fixidity_1.fromFixed)(new bignumber_js_1.default(res[3]))\n            }];\n        }\n      });\n    });\n  }; // simulates proposal.getSupportWithQuorumPadding\n\n\n  GovernanceWrapper.prototype.getSupport = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var participation, quorum, votes, total, lockedGold, networkWeight, required, support;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getParticipationParameters()];\n\n          case 1:\n            participation = _a.sent();\n            quorum = participation.baseline.times(participation.baselineQuorumFactor);\n            return [4\n            /*yield*/\n            , this.getVotes(proposalID)];\n\n          case 2:\n            votes = _a.sent();\n            total = votes.Yes.plus(votes.No).plus(votes.Abstain);\n            return [4\n            /*yield*/\n            , this.kit.contracts.getLockedGold() // NOTE: this networkWeight is not as governance calculates it,\n            // but we don't have access to proposal.networkWeight\n            ];\n\n          case 3:\n            lockedGold = _a.sent();\n            return [4\n            /*yield*/\n            , lockedGold.getTotalLockedGold()];\n\n          case 4:\n            networkWeight = _a.sent();\n            required = networkWeight.times(quorum);\n            support = votes.Yes.div(votes.Yes.plus(votes.No));\n            return [2\n            /*return*/\n            , {\n              support: support,\n              required: required,\n              total: total\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns current configuration parameters.\n   */\n\n\n  GovernanceWrapper.prototype.getConfig = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Promise.all([this.concurrentProposals(), this.dequeueFrequency(), this.minDeposit(), this.queueExpiry(), this.stageDurations(), this.getParticipationParameters()])];\n\n          case 1:\n            res = _a.sent();\n            return [2\n            /*return*/\n            , {\n              concurrentProposals: res[0],\n              dequeueFrequency: res[1],\n              minDeposit: res[2],\n              queueExpiry: res[3],\n              stageDurations: res[4],\n              participationParameters: res[5]\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * @dev Returns human readable configuration of the governance contract\n   * @return GovernanceConfig object\n   */\n\n\n  GovernanceWrapper.prototype.getHumanReadableConfig = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var config, stageDurations;\n\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getConfig()];\n\n          case 1:\n            config = _b.sent();\n            stageDurations = (_a = {}, _a[ProposalStage.Approval] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Approval]), _a[ProposalStage.Referendum] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Referendum]), _a[ProposalStage.Execution] = (0, BaseWrapper_1.secondsToDurationString)(config.stageDurations[ProposalStage.Execution]), _a);\n            return [2\n            /*return*/\n            , __assign(__assign({}, config), {\n              dequeueFrequency: (0, BaseWrapper_1.secondsToDurationString)(config.dequeueFrequency),\n              queueExpiry: (0, BaseWrapper_1.secondsToDurationString)(config.queueExpiry),\n              stageDurations: stageDurations\n            })];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the human readable metadata associated with a given proposal.\n   * @param proposalID Governance proposal UUID\n   */\n\n\n  GovernanceWrapper.prototype.getHumanReadableProposalMetadata = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var meta;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getProposalMetadata(proposalID)];\n\n          case 1:\n            meta = _a.sent();\n            return [2\n            /*return*/\n            , __assign(__assign({}, meta), {\n              timestamp: (0, BaseWrapper_1.unixSecondsTimestampToDateString)(meta.timestamp)\n            })];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.proposalSchedule = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var meta, stage, queueExpiry, queueExpiration, durations, referendum, execution, expiration;\n\n      var _a, _b;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getProposalMetadata(proposalID)];\n\n          case 1:\n            meta = _c.sent();\n            return [4\n            /*yield*/\n            , this.getProposalStage(proposalID)];\n\n          case 2:\n            stage = _c.sent();\n            if (!(stage === ProposalStage.Queued)) return [3\n            /*break*/\n            , 4];\n            return [4\n            /*yield*/\n            , this.queueExpiry()];\n\n          case 3:\n            queueExpiry = _c.sent();\n            queueExpiration = meta.timestamp.plus(queueExpiry);\n            return [2\n            /*return*/\n            , (_a = {}, _a[ProposalStage.Queued] = meta.timestamp, _a[ProposalStage.Expiration] = queueExpiration, _a)];\n\n          case 4:\n            return [4\n            /*yield*/\n            , this.stageDurations()];\n\n          case 5:\n            durations = _c.sent();\n            referendum = meta.timestamp.plus(durations.Approval);\n            execution = referendum.plus(durations.Referendum);\n            expiration = execution.plus(durations.Execution);\n            return [2\n            /*return*/\n            , (_b = {}, _b[ProposalStage.Approval] = meta.timestamp, _b[ProposalStage.Referendum] = referendum, _b[ProposalStage.Execution] = execution, _b[ProposalStage.Expiration] = expiration, _b)];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.humanReadableProposalSchedule = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var schedule, dates, _i, _a, stage;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.proposalSchedule(proposalID)];\n\n          case 1:\n            schedule = _b.sent();\n            dates = {};\n\n            for (_i = 0, _a = Object.keys(schedule); _i < _a.length; _i++) {\n              stage = _a[_i];\n              dates[stage] = (0, BaseWrapper_1.unixSecondsTimestampToDateString)(schedule[stage]);\n            }\n\n            return [2\n            /*return*/\n            , dates];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the proposal associated with a given id.\n   * @param proposalID Governance proposal UUID\n   */\n\n\n  GovernanceWrapper.prototype.getProposal = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var metadata, txIndices;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getProposalMetadata(proposalID)];\n\n          case 1:\n            metadata = _a.sent();\n            txIndices = (0, collections_1.zeroRange)(metadata.transactionCount);\n            return [2\n            /*return*/\n            , (0, async_1.concurrentMap)(4, txIndices, function (idx) {\n              return _this.getProposalTransaction(proposalID, idx);\n            })];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.getApprovalStatus = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var multisig, approveTx, multisigTxs, confirmations, approvers;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getApproverMultisig()];\n\n          case 1:\n            multisig = _a.sent();\n            return [4\n            /*yield*/\n            , this.approve(proposalID)];\n\n          case 2:\n            approveTx = _a.sent();\n            return [4\n            /*yield*/\n            , multisig.getTransactionDataByContent(this.address, approveTx.txo)];\n\n          case 3:\n            multisigTxs = _a.sent();\n            confirmations = multisigTxs ? multisigTxs.confirmations : [];\n            return [4\n            /*yield*/\n            , multisig.getOwners()];\n\n          case 4:\n            approvers = _a.sent();\n            return [2\n            /*return*/\n            , {\n              completion: confirmations.length + \" / \" + approvers.length,\n              confirmations: confirmations,\n              approvers: approvers\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the stage, metadata, upvotes, votes, and transactions associated with a given proposal.\n   * @param proposalID Governance proposal UUID\n   */\n\n\n  GovernanceWrapper.prototype.getProposalRecord = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var metadata, proposal, stage, record, _a, _b, _c, _d, _e;\n\n      return __generator(this, function (_f) {\n        switch (_f.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getProposalMetadata(proposalID)];\n\n          case 1:\n            metadata = _f.sent();\n            return [4\n            /*yield*/\n            , this.getProposal(proposalID)];\n\n          case 2:\n            proposal = _f.sent();\n            return [4\n            /*yield*/\n            , this.getProposalStage(proposalID)];\n\n          case 3:\n            stage = _f.sent();\n            record = {\n              proposal: proposal,\n              metadata: metadata,\n              stage: stage,\n              passed: false,\n              approved: false\n            };\n            if (!(stage === ProposalStage.Queued)) return [3\n            /*break*/\n            , 5];\n            _a = record;\n            return [4\n            /*yield*/\n            , this.getUpvotes(proposalID)];\n\n          case 4:\n            _a.upvotes = _f.sent();\n            return [3\n            /*break*/\n            , 11];\n\n          case 5:\n            if (!(stage === ProposalStage.Approval)) return [3\n            /*break*/\n            , 8];\n            _b = record;\n            return [4\n            /*yield*/\n            , this.isApproved(proposalID)];\n\n          case 6:\n            _b.approved = _f.sent();\n            _c = record;\n            return [4\n            /*yield*/\n            , this.getApprovalStatus(proposalID)];\n\n          case 7:\n            _c.approvals = _f.sent();\n            return [3\n            /*break*/\n            , 11];\n\n          case 8:\n            if (!(stage === ProposalStage.Referendum || stage === ProposalStage.Execution)) return [3\n            /*break*/\n            , 11];\n            record.approved = true;\n            _d = record;\n            return [4\n            /*yield*/\n            , this.isProposalPassing(proposalID)];\n\n          case 9:\n            _d.passed = _f.sent();\n            _e = record;\n            return [4\n            /*yield*/\n            , this.getVotes(proposalID)];\n\n          case 10:\n            _e.votes = _f.sent();\n            _f.label = 11;\n\n          case 11:\n            return [2\n            /*return*/\n            , record];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.isUpvoting = function (upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var upvote, _a, _b;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getUpvoteRecord(upvoter)];\n\n          case 1:\n            upvote = _c.sent();\n            _b = !upvote.proposalID.isZero();\n            if (!_b) return [3\n            /*break*/\n            , 3];\n            return [4\n            /*yield*/\n            , this.isQueued(upvote.proposalID)];\n\n          case 2:\n            _b = _c.sent();\n            _c.label = 3;\n\n          case 3:\n            _a = _b;\n            if (!_a) return [3\n            /*break*/\n            , 5];\n            return [4\n            /*yield*/\n            , this.isQueuedProposalExpired(upvote.proposalID)];\n\n          case 4:\n            _a = !_c.sent();\n            _c.label = 5;\n\n          case 5:\n            return [2\n            /*return*/\n            , _a];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the corresponding vote record\n   * @param voter Address of voter\n   * @param proposalID Governance proposal UUID\n   */\n\n\n  GovernanceWrapper.prototype.getVoteRecord = function (voter, proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex, res, _1;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.getDequeueIndex(proposalID)];\n\n          case 1:\n            proposalIndex = _a.sent();\n            return [4\n            /*yield*/\n            , this.contract.methods.getVoteRecord(voter, proposalIndex).call()];\n\n          case 2:\n            res = _a.sent();\n            return [2\n            /*return*/\n            , {\n              proposalID: (0, BaseWrapper_1.valueToBigNumber)(res[0]),\n              value: Object.keys(VoteValue)[(0, BaseWrapper_1.valueToInt)(res[1])],\n              votes: (0, BaseWrapper_1.valueToBigNumber)(res[2])\n            }];\n\n          case 3:\n            _1 = _a.sent(); // The proposal ID may not be present in the dequeued list, or the voter may not have a vote\n            // record for the proposal.\n\n            return [2\n            /*return*/\n            , null];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the (existing) proposal dequeue as list of proposal IDs.\n   */\n\n\n  GovernanceWrapper.prototype.getDequeue = function (filterZeroes) {\n    if (filterZeroes === void 0) {\n      filterZeroes = false;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var dequeue, dequeueIds;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contract.methods.getDequeue().call() // filter non-zero as dequeued indices are reused and `deleteDequeuedProposal` zeroes\n            ];\n\n          case 1:\n            dequeue = _a.sent();\n            dequeueIds = dequeue.map(BaseWrapper_1.valueToBigNumber);\n            return [2\n            /*return*/\n            , filterZeroes ? dequeueIds.filter(function (id) {\n              return !id.isZero();\n            }) : dequeueIds];\n        }\n      });\n    });\n  };\n  /*\n   * Returns the vote records for a given voter.\n   */\n\n\n  GovernanceWrapper.prototype.getVoteRecords = function (voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var dequeue, voteRecords;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getDequeue()];\n\n          case 1:\n            dequeue = _a.sent();\n            return [4\n            /*yield*/\n            , Promise.all(dequeue.map(function (id) {\n              return _this.getVoteRecord(voter, id);\n            }))];\n\n          case 2:\n            voteRecords = _a.sent();\n            return [2\n            /*return*/\n            , voteRecords.filter(function (record) {\n              return record != null;\n            })];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.isVotingReferendum = function (voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var records;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getVoteRecords(voter)];\n\n          case 1:\n            records = _a.sent();\n            return [2\n            /*return*/\n            , records.length !== 0];\n        }\n      });\n    });\n  };\n  /*\n   * Returns information pertaining to a voter in governance.\n   */\n\n\n  GovernanceWrapper.prototype.getVoter = function (account) {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Promise.all([this.getUpvoteRecord(account), this.getVoteRecords(account), this.getRefundedDeposits(account)])];\n\n          case 1:\n            res = _a.sent();\n            return [2\n            /*return*/\n            , {\n              upvote: res[0],\n              votes: res[1],\n              refundedDeposits: res[2]\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns the number of votes that will be applied to a proposal for a given voter.\n   * @param voter Address of voter\n   */\n\n\n  GovernanceWrapper.prototype.getVoteWeight = function (voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var lockedGoldContract;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.kit.contracts.getLockedGold()];\n\n          case 1:\n            lockedGoldContract = _a.sent();\n            return [2\n            /*return*/\n            , lockedGoldContract.getAccountTotalLockedGold(voter)];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.getIndex = function (id, array) {\n    var index = array.findIndex(function (bn) {\n      return bn.isEqualTo(id);\n    });\n\n    if (index === -1) {\n      throw new Error(\"ID \" + id + \" not found in array \" + array);\n    }\n\n    return index;\n  };\n\n  GovernanceWrapper.prototype.getDequeueIndex = function (proposalID, dequeue) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!dequeue) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this.getDequeue()];\n\n          case 1:\n            dequeue = _a.sent();\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , this.getIndex(proposalID, dequeue)];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.getQueueIndex = function (proposalID, queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!queue) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this.getQueue()];\n\n          case 1:\n            queue = _a.sent();\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , {\n              index: this.getIndex(proposalID, queue.map(function (record) {\n                return record.proposalID;\n              })),\n              queue: queue\n            }];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.lesserAndGreater = function (proposalID, _queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, index, queue;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getQueueIndex(proposalID, _queue)];\n\n          case 1:\n            _a = _b.sent(), index = _a.index, queue = _a.queue;\n            return [2\n            /*return*/\n            , {\n              lesserID: index === 0 ? ZERO_BN : queue[index - 1].proposalID,\n              greaterID: index === queue.length - 1 ? ZERO_BN : queue[index + 1].proposalID\n            }];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.sortedQueue = function (queue) {\n    return queue.sort(function (a, b) {\n      return a.upvotes.comparedTo(b.upvotes);\n    });\n  };\n\n  GovernanceWrapper.prototype.withUpvoteRevoked = function (upvoter, _queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      var upvoteRecord, _a, index, queue;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getUpvoteRecord(upvoter)];\n\n          case 1:\n            upvoteRecord = _b.sent();\n            return [4\n            /*yield*/\n            , this.getQueueIndex(upvoteRecord.proposalID, _queue)];\n\n          case 2:\n            _a = _b.sent(), index = _a.index, queue = _a.queue;\n            queue[index].upvotes = queue[index].upvotes.minus(upvoteRecord.upvotes);\n            return [2\n            /*return*/\n            , {\n              queue: this.sortedQueue(queue),\n              upvoteRecord: upvoteRecord\n            }];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.withUpvoteApplied = function (upvoter, proposalID, _queue) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, index, queue, weight;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getQueueIndex(proposalID, _queue)];\n\n          case 1:\n            _a = _b.sent(), index = _a.index, queue = _a.queue;\n            return [4\n            /*yield*/\n            , this.getVoteWeight(upvoter)];\n\n          case 2:\n            weight = _b.sent();\n            queue[index].upvotes = queue[index].upvotes.plus(weight);\n            return [2\n            /*return*/\n            , this.sortedQueue(queue)];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.lesserAndGreaterAfterRevoke = function (upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, queue, upvoteRecord;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.withUpvoteRevoked(upvoter)];\n\n          case 1:\n            _a = _b.sent(), queue = _a.queue, upvoteRecord = _a.upvoteRecord;\n            return [2\n            /*return*/\n            , this.lesserAndGreater(upvoteRecord.proposalID, queue)];\n        }\n      });\n    });\n  };\n\n  GovernanceWrapper.prototype.lesserAndGreaterAfterUpvote = function (upvoter, proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var upvoteRecord, recordQueued, queue, _a, upvoteQueue;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getUpvoteRecord(upvoter)];\n\n          case 1:\n            upvoteRecord = _b.sent();\n            return [4\n            /*yield*/\n            , this.isQueued(upvoteRecord.proposalID) // if existing upvote exists in queue, revoke it before applying new upvote\n            ];\n\n          case 2:\n            recordQueued = _b.sent();\n            if (!recordQueued) return [3\n            /*break*/\n            , 4];\n            return [4\n            /*yield*/\n            , this.withUpvoteRevoked(upvoter)];\n\n          case 3:\n            _a = _b.sent().queue;\n            return [3\n            /*break*/\n            , 6];\n\n          case 4:\n            return [4\n            /*yield*/\n            , this.getQueue()];\n\n          case 5:\n            _a = _b.sent();\n            _b.label = 6;\n\n          case 6:\n            queue = _a;\n            return [4\n            /*yield*/\n            , this.withUpvoteApplied(upvoter, proposalID, queue)];\n\n          case 7:\n            upvoteQueue = _b.sent();\n            return [2\n            /*return*/\n            , this.lesserAndGreater(proposalID, upvoteQueue)];\n        }\n      });\n    });\n  };\n  /**\n   * Applies provided upvoter's upvote to given proposal.\n   * @param proposalID Governance proposal UUID\n   * @param upvoter Address of upvoter\n   */\n\n\n  GovernanceWrapper.prototype.upvote = function (proposalID, upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, lesserID, greaterID;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.lesserAndGreaterAfterUpvote(upvoter, proposalID)];\n\n          case 1:\n            _a = _b.sent(), lesserID = _a.lesserID, greaterID = _a.greaterID;\n            return [2\n            /*return*/\n            , (0, connect_1.toTransactionObject)(this.kit.connection, this.contract.methods.upvote((0, BaseWrapper_1.valueToString)(proposalID), (0, BaseWrapper_1.valueToString)(lesserID), (0, BaseWrapper_1.valueToString)(greaterID)))];\n        }\n      });\n    });\n  };\n  /**\n   * Revokes provided upvoter's upvote.\n   * @param upvoter Address of upvoter\n   */\n\n\n  GovernanceWrapper.prototype.revokeUpvote = function (upvoter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, lesserID, greaterID;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.lesserAndGreaterAfterRevoke(upvoter)];\n\n          case 1:\n            _a = _b.sent(), lesserID = _a.lesserID, greaterID = _a.greaterID;\n            return [2\n            /*return*/\n            , (0, connect_1.toTransactionObject)(this.kit.connection, this.contract.methods.revokeUpvote((0, BaseWrapper_1.valueToString)(lesserID), (0, BaseWrapper_1.valueToString)(greaterID)))];\n        }\n      });\n    });\n  };\n  /**\n   * Approves given proposal, allowing it to later move to `referendum`.\n   * @param proposalID Governance proposal UUID\n   * @notice Only the `approver` address will succeed in sending this transaction\n   */\n\n\n  GovernanceWrapper.prototype.approve = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getDequeueIndex(proposalID)];\n\n          case 1:\n            proposalIndex = _a.sent();\n            return [2\n            /*return*/\n            , (0, connect_1.toTransactionObject)(this.kit.connection, this.contract.methods.approve((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex))];\n        }\n      });\n    });\n  };\n  /**\n   * Applies `sender`'s vote choice to a given proposal.\n   * @param proposalID Governance proposal UUID\n   * @param vote Choice to apply (yes, no, abstain)\n   */\n\n\n  GovernanceWrapper.prototype.vote = function (proposalID, vote) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex, voteNum;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getDequeueIndex(proposalID)];\n\n          case 1:\n            proposalIndex = _a.sent();\n            voteNum = Object.keys(VoteValue).indexOf(vote);\n            return [2\n            /*return*/\n            , (0, connect_1.toTransactionObject)(this.kit.connection, this.contract.methods.vote((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex, voteNum))];\n        }\n      });\n    });\n  };\n  /**\n   * Returns `voter`'s vote choice on a given proposal.\n   * @param proposalID Governance proposal UUID\n   * @param voter Address of voter\n   */\n\n\n  GovernanceWrapper.prototype.getVoteValue = function (proposalID, voter) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex, res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getDequeueIndex(proposalID)];\n\n          case 1:\n            proposalIndex = _a.sent();\n            return [4\n            /*yield*/\n            , this.contract.methods.getVoteRecord(voter, proposalIndex).call()];\n\n          case 2:\n            res = _a.sent();\n            return [2\n            /*return*/\n            , Object.keys(VoteValue)[(0, BaseWrapper_1.valueToInt)(res[1])]];\n        }\n      });\n    });\n  };\n  /**\n   * Executes a given proposal's associated transactions.\n   * @param proposalID Governance proposal UUID\n   */\n\n\n  GovernanceWrapper.prototype.execute = function (proposalID) {\n    return __awaiter(this, void 0, void 0, function () {\n      var proposalIndex;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getDequeueIndex(proposalID)];\n\n          case 1:\n            proposalIndex = _a.sent();\n            return [2\n            /*return*/\n            , (0, connect_1.toTransactionObject)(this.kit.connection, this.contract.methods.execute((0, BaseWrapper_1.valueToString)(proposalID), proposalIndex))];\n        }\n      });\n    });\n  };\n  /**\n   * Returns approved, executed, and prepared status associated with a given hotfix.\n   * @param hash keccak256 hash of hotfix's associated abi encoded transactions\n   */\n\n\n  GovernanceWrapper.prototype.getHotfixRecord = function (hash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var res;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.contract.methods.getHotfixRecord((0, address_1.bufferToHex)(hash)).call()];\n\n          case 1:\n            res = _a.sent();\n            return [2\n            /*return*/\n            , {\n              approved: res[0],\n              executed: res[1],\n              preparedEpoch: (0, BaseWrapper_1.valueToBigNumber)(res[2])\n            }];\n        }\n      });\n    });\n  };\n\n  return GovernanceWrapper;\n}(BaseWrapper_1.BaseWrapper);\n\nexports.GovernanceWrapper = GovernanceWrapper;","map":{"version":3,"mappings":"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","names":["ProposalStage","exports","proposalToParams","proposal","descriptionURL","data","map","tx","input","value","to","Buffer","concat","inp","length","VoteValue","hotfixToParams","salt","p","ZERO_BN","bignumber_js_1","__extends","_this","contract","methods","concurrentProposals","undefined","BaseWrapper_1","lastDequeue","dequeueFrequency","minDeposit","queueExpiry","isVoting","getProposal","res","proposer","deposit","timestamp","transactionCount","getProposalTransaction","isApproved","isDequeuedProposalExpired","isQueuedProposalExpired","approver","getApprover","then","address","kit","contracts","getMultiSig","proposalID","getQueue","queue","_a","existsInQueue","find","u","expired","Expiration","Queued","getProposalStage","call","Object","keys","isProposalPassing","withdraw","propose","proposalExists","getUpvoteRecord","o","upvotes","isQueued","refundedDeposits","getUpvotes","getVoteTotals","Yes","No","Abstain","arraysObject","_id","_upvotes","dequeueProposalsIfReady","revokeVotes","isHotfixWhitelistedBy","address_1","s","isHotfixPassing","minQuorumSizeInCurrentSet","hotfixWhitelistValidatorTally","whitelistHotfix","approveHotfix","prepareHotfix","executeHotfix","GovernanceWrapper","stageDurations","_b","Approval","Referendum","Execution","callSignature","slice","getConstitution","constitution","proposal_1","_i","max","getTransactionConstitution","_c","getParticipationParameters","baseline","baselineFloor","baselineUpdateFactor","baselineQuorumFactor","participation","quorum","times","getVotes","votes","total","plus","getLockedGold","lockedGold","getTotalLockedGold","networkWeight","required","support","div","Promise","all","participationParameters","getConfig","config","getProposalMetadata","meta","stage","queueExpiration","durations","referendum","execution","expiration","proposalSchedule","schedule","dates","metadata","txIndices","idx","getApproverMultisig","multisig","approve","approveTx","getTransactionDataByContent","txo","multisigTxs","confirmations","getOwners","approvers","completion","_f","record","passed","approved","getApprovalStatus","approvals","_d","_e","upvoter","upvote","isZero","voter","getDequeueIndex","proposalIndex","getVoteRecord","filterZeroes","getDequeue","dequeue","dequeueIds","filter","id","voteRecords","getVoteRecords","records","account","getRefundedDeposits","lockedGoldContract","getAccountTotalLockedGold","array","index","findIndex","bn","isEqualTo","Error","getIndex","_queue","getQueueIndex","lesserID","greaterID","sort","a","b","comparedTo","upvoteRecord","minus","sortedQueue","getVoteWeight","weight","withUpvoteRevoked","lesserAndGreater","recordQueued","withUpvoteApplied","upvoteQueue","lesserAndGreaterAfterUpvote","connection","lesserAndGreaterAfterRevoke","revokeUpvote","vote","voteNum","indexOf","execute","hash","getHotfixRecord","executed","preparedEpoch"],"sourceRoot":"","sources":["../../src/wrappers/Governance.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}