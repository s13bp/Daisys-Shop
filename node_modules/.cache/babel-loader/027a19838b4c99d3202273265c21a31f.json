{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pipeToFuture = exports.toFuture = exports.Future = void 0; // A Future is like an exernally fulfillable (resolvable) promise\n\nvar Future =\n/** @class */\nfunction () {\n  function Future() {\n    var _this = this;\n\n    this._finished = false;\n    this._error = null;\n    this.promise = new Promise(function (resolve, reject) {\n      _this._resolve = resolve;\n      _this._reject = reject;\n    });\n  }\n\n  Object.defineProperty(Future.prototype, \"finished\", {\n    get: function get() {\n      return this._finished;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Future.prototype, \"error\", {\n    get: function get() {\n      return this._error;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Future.prototype.resolve = function (value) {\n    this._finished = true;\n    this._error = null;\n\n    this._resolve(value);\n  };\n\n  Future.prototype.reject = function (error) {\n    this._finished = true;\n    this._error = error;\n\n    this._reject(error);\n  };\n\n  Future.prototype.wait = function () {\n    return this.promise;\n  };\n\n  Future.prototype.asPromise = function () {\n    return this.promise;\n  };\n\n  return Future;\n}();\n\nexports.Future = Future;\n\nfunction toFuture(p) {\n  var future = new Future();\n  return pipeToFuture(p, future);\n}\n\nexports.toFuture = toFuture;\n\nfunction pipeToFuture(p, future) {\n  p.then(future.resolve.bind(future)).catch(future.reject.bind(future));\n  return future;\n}\n\nexports.pipeToFuture = pipeToFuture;","map":{"version":3,"mappings":";;;;;mEAAA;;AACA;AAAA;AAAA;AAOE;AAAA;;AALQ,qBAAY,KAAZ;AACA,kBAAc,IAAd;AAKN,SAAKA,OAAL,GAAe,IAAIC,OAAJ,CAAe,UAACC,OAAD,EAAUC,MAAV,EAAgB;AAC5CC,WAAI,CAACC,QAAL,GAAgBH,OAAhB;AACAE,WAAI,CAACE,OAAL,GAAeH,MAAf;AACD,KAHc,CAAf;AAID;;AAEDI,wBAAIC,gBAAJ,EAAI,UAAJ,EAAY;SAAZ;AACE,aAAO,KAAKC,SAAZ;AACD,KAFW;qBAAA;;AAAA,GAAZ;AAIAF,wBAAIC,gBAAJ,EAAI,OAAJ,EAAS;SAAT;AACE,aAAO,KAAKE,MAAZ;AACD,KAFQ;qBAAA;;AAAA,GAAT;;AAIAF,uCAAQG,KAAR,EAAgB;AACd,SAAKF,SAAL,GAAiB,IAAjB;AACA,SAAKC,MAAL,GAAc,IAAd;;AACA,SAAKL,QAAL,CAAcM,KAAd;AACD,GAJD;;AAMAH,sCAAOI,KAAP,EAAiB;AACf,SAAKH,SAAL,GAAiB,IAAjB;AACA,SAAKC,MAAL,GAAcE,KAAd;;AACA,SAAKN,OAAL,CAAaM,KAAb;AACD,GAJD;;AAMAJ;AACE,WAAO,KAAKR,OAAZ;AACD,GAFD;;AAIAQ;AACE,WAAO,KAAKR,OAAZ;AACD,GAFD;;AAGF;AAAC,CAzCD;;AAAaa;;AA2Cb,SAAgBC,QAAhB,CAA4BC,CAA5B,EAAyC;AACvC,MAAMC,MAAM,GAAG,IAAIR,MAAJ,EAAf;AACA,SAAOS,YAAY,CAACF,CAAD,EAAIC,MAAJ,CAAnB;AACD;;AAHDH;;AAKA,SAAgBI,YAAhB,CAAgCF,CAAhC,EAA+CC,MAA/C,EAAgE;AAC9DD,GAAC,CAACG,IAAF,CAAOF,MAAM,CAACd,OAAP,CAAeiB,IAAf,CAAoBH,MAApB,CAAP,EAAoCI,KAApC,CAA0CJ,MAAM,CAACb,MAAP,CAAcgB,IAAd,CAAmBH,MAAnB,CAA1C;AACA,SAAOA,MAAP;AACD;;AAHDH","names":["promise","Promise","resolve","reject","_this","_resolve","_reject","Object","Future","_finished","_error","value","error","exports","toFuture","p","future","pipeToFuture","then","bind","catch"],"sourceRoot":"","sources":["../src/future.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}