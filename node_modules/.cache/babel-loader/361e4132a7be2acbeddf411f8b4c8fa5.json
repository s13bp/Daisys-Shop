{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWindowMetadata = void 0;\n\nvar window_getters_1 = require(\"@walletconnect/window-getters\");\n\nfunction getWindowMetadata() {\n  var doc;\n  var loc;\n\n  try {\n    doc = window_getters_1.getDocumentOrThrow();\n    loc = window_getters_1.getLocationOrThrow();\n  } catch (e) {\n    return null;\n  }\n\n  function getIcons() {\n    var links = doc.getElementsByTagName(\"link\");\n    var icons = [];\n\n    for (var i = 0; i < links.length; i++) {\n      var link = links[i];\n      var rel = link.getAttribute(\"rel\");\n\n      if (rel) {\n        if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n          var href = link.getAttribute(\"href\");\n\n          if (href) {\n            if (href.toLowerCase().indexOf(\"https:\") === -1 && href.toLowerCase().indexOf(\"http:\") === -1 && href.indexOf(\"//\") !== 0) {\n              var absoluteHref = loc.protocol + \"//\" + loc.host;\n\n              if (href.indexOf(\"/\") === 0) {\n                absoluteHref += href;\n              } else {\n                var path = loc.pathname.split(\"/\");\n                path.pop();\n                var finalPath = path.join(\"/\");\n                absoluteHref += finalPath + \"/\" + href;\n              }\n\n              icons.push(absoluteHref);\n            } else if (href.indexOf(\"//\") === 0) {\n              var absoluteUrl = loc.protocol + href;\n              icons.push(absoluteUrl);\n            } else {\n              icons.push(href);\n            }\n          }\n        }\n      }\n    }\n\n    return icons;\n  }\n\n  function getWindowMetadataOfAny() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var metaTags = doc.getElementsByTagName(\"meta\");\n\n    var _loop = function _loop(i) {\n      var tag = metaTags[i];\n      var attributes = [\"itemprop\", \"property\", \"name\"].map(function (target) {\n        return tag.getAttribute(target);\n      }).filter(function (attr) {\n        if (attr) {\n          return args.includes(attr);\n        }\n\n        return false;\n      });\n\n      if (attributes.length && attributes) {\n        var content = tag.getAttribute(\"content\");\n\n        if (content) {\n          return {\n            v: content\n          };\n        }\n      }\n    };\n\n    for (var i = 0; i < metaTags.length; i++) {\n      var _ret = _loop(i);\n\n      if (typeof _ret === \"object\") return _ret.v;\n    }\n\n    return \"\";\n  }\n\n  function getName() {\n    var name = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n\n    if (!name) {\n      name = doc.title;\n    }\n\n    return name;\n  }\n\n  function getDescription() {\n    var description = getWindowMetadataOfAny(\"description\", \"og:description\", \"twitter:description\", \"keywords\");\n    return description;\n  }\n\n  var name = getName();\n  var description = getDescription();\n  var url = loc.origin;\n  var icons = getIcons();\n  var meta = {\n    description: description,\n    url: url,\n    icons: icons,\n    name: name\n  };\n  return meta;\n}\n\nexports.getWindowMetadata = getWindowMetadata;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAYA,SAAgBA,iBAAhB,GAAiC;AAC/B,MAAIC,GAAJ;AACA,MAAIC,GAAJ;;AAEA,MAAI;AACFD,OAAG,GAAGE,qCAAN;AACAD,OAAG,GAAGC,qCAAN;AACD,GAHD,CAGE,OAAOC,CAAP,EAAU;AACV,WAAO,IAAP;AACD;;AAED,WAASC,QAAT,GAAiB;AACf,QAAMC,KAAK,GAAsCL,GAAG,CAACM,oBAAJ,CAC/C,MAD+C,CAAjD;AAGA,QAAMC,KAAK,GAAa,EAAxB;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAME,IAAI,GAAoBL,KAAK,CAACG,CAAD,CAAnC;AAEA,UAAMG,GAAG,GAAkBD,IAAI,CAACE,YAAL,CAAkB,KAAlB,CAA3B;;AACA,UAAID,GAAJ,EAAS;AACP,YAAIA,GAAG,CAACE,WAAJ,GAAkBC,OAAlB,CAA0B,MAA1B,IAAoC,CAAC,CAAzC,EAA4C;AAC1C,cAAMC,IAAI,GAAkBL,IAAI,CAACE,YAAL,CAAkB,MAAlB,CAA5B;;AAEA,cAAIG,IAAJ,EAAU;AACR,gBACEA,IAAI,CAACF,WAAL,GAAmBC,OAAnB,CAA2B,QAA3B,MAAyC,CAAC,CAA1C,IACAC,IAAI,CAACF,WAAL,GAAmBC,OAAnB,CAA2B,OAA3B,MAAwC,CAAC,CADzC,IAEAC,IAAI,CAACD,OAAL,CAAa,IAAb,MAAuB,CAHzB,EAIE;AACA,kBAAIE,YAAY,GAAWf,GAAG,CAACgB,QAAJ,GAAe,IAAf,GAAsBhB,GAAG,CAACiB,IAArD;;AAEA,kBAAIH,IAAI,CAACD,OAAL,CAAa,GAAb,MAAsB,CAA1B,EAA6B;AAC3BE,4BAAY,IAAID,IAAhB;AACD,eAFD,MAEO;AACL,oBAAMI,IAAI,GAAalB,GAAG,CAACmB,QAAJ,CAAaC,KAAb,CAAmB,GAAnB,CAAvB;AACAF,oBAAI,CAACG,GAAL;AACA,oBAAMC,SAAS,GAAWJ,IAAI,CAACK,IAAL,CAAU,GAAV,CAA1B;AACAR,4BAAY,IAAIO,SAAS,GAAG,GAAZ,GAAkBR,IAAlC;AACD;;AAEDR,mBAAK,CAACkB,IAAN,CAAWT,YAAX;AACD,aAjBD,MAiBO,IAAID,IAAI,CAACD,OAAL,CAAa,IAAb,MAAuB,CAA3B,EAA8B;AACnC,kBAAMY,WAAW,GAAWzB,GAAG,CAACgB,QAAJ,GAAeF,IAA3C;AAEAR,mBAAK,CAACkB,IAAN,CAAWC,WAAX;AACD,aAJM,MAIA;AACLnB,mBAAK,CAACkB,IAAN,CAAWV,IAAX;AACD;AACF;AACF;AACF;AACF;;AAED,WAAOR,KAAP;AACD;;AAED,WAASoB,sBAAT,GAAiD;AAAA,sCAAdC,IAAc;AAAdA,UAAc;AAAA;;AAC/C,QAAMC,QAAQ,GAAsC7B,GAAG,CAACM,oBAAJ,CAClD,MADkD,CAApD;;AAD+C,+BAKtCE,CALsC;AAM7C,UAAMsB,GAAG,GAAoBD,QAAQ,CAACrB,CAAD,CAArC;AACA,UAAMuB,UAAU,GAAyB,CAAC,UAAD,EAAa,UAAb,EAAyB,MAAzB,EACtCC,GADsC,CAClC,UAACC,MAAD;AAAA,eAAoBH,GAAG,CAAClB,YAAJ,CAAiBqB,MAAjB,CAApB;AAAA,OADkC,EAEtCC,MAFsC,CAE/B,UAACC,IAAD,EAAwB;AAC9B,YAAIA,IAAJ,EAAU;AACR,iBAAOP,IAAI,CAACQ,QAAL,CAAcD,IAAd,CAAP;AACD;;AACD,eAAO,KAAP;AACD,OAPsC,CAAzC;;AASA,UAAIJ,UAAU,CAACtB,MAAX,IAAqBsB,UAAzB,EAAqC;AACnC,YAAMM,OAAO,GAAkBP,GAAG,CAAClB,YAAJ,CAAiB,SAAjB,CAA/B;;AACA,YAAIyB,OAAJ,EAAa;AACX;AAAA,eAAOA;AAAP;AACD;AACF;AArB4C;;AAK/C,SAAK,IAAI7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqB,QAAQ,CAACpB,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AAAA,uBAAjCA,CAAiC;;AAAA;AAiBzC;;AAED,WAAO,EAAP;AACD;;AAED,WAAS8B,OAAT,GAAgB;AACd,QAAIC,IAAI,GAAWZ,sBAAsB,CACvC,MADuC,EAEvC,cAFuC,EAGvC,UAHuC,EAIvC,eAJuC,CAAzC;;AAOA,QAAI,CAACY,IAAL,EAAW;AACTA,UAAI,GAAGvC,GAAG,CAACwC,KAAX;AACD;;AAED,WAAOD,IAAP;AACD;;AAED,WAASE,cAAT,GAAuB;AACrB,QAAMC,WAAW,GAAWf,sBAAsB,CAChD,aADgD,EAEhD,gBAFgD,EAGhD,qBAHgD,EAIhD,UAJgD,CAAlD;AAOA,WAAOe,WAAP;AACD;;AAED,MAAMH,IAAI,GAAWD,OAAO,EAA5B;AACA,MAAMI,WAAW,GAAWD,cAAc,EAA1C;AACA,MAAME,GAAG,GAAW1C,GAAG,CAAC2C,MAAxB;AACA,MAAMrC,KAAK,GAAaH,QAAQ,EAAhC;AAEA,MAAMyC,IAAI,GAAqB;AAC7BH,eAAW,EAAXA,WAD6B;AAE7BC,OAAG,EAAHA,GAF6B;AAG7BpC,SAAK,EAALA,KAH6B;AAI7BgC,QAAI,EAAJA;AAJ6B,GAA/B;AAOA,SAAOM,IAAP;AACD;;AA5HDC","names":["getWindowMetadata","doc","loc","window_getters_1","e","getIcons","links","getElementsByTagName","icons","i","length","link","rel","getAttribute","toLowerCase","indexOf","href","absoluteHref","protocol","host","path","pathname","split","pop","finalPath","join","push","absoluteUrl","getWindowMetadataOfAny","args","metaTags","tag","attributes","map","target","filter","attr","includes","content","getName","name","title","getDescription","description","url","origin","meta","exports"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}