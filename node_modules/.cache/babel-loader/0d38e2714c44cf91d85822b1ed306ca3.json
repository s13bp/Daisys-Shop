{"ast":null,"code":"import _classCallCheck from \"/Users/crypto/Daisys/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/crypto/Daisys/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { isJsonRpcRequest, isJsonRpcResponseSuccess, isJsonRpcResponseError, isInternalEvent, isReservedEvent } from \"@walletconnect/utils\";\n\nvar EventManager = /*#__PURE__*/function () {\n  function EventManager() {\n    _classCallCheck(this, EventManager);\n\n    this._eventEmitters = [];\n  }\n\n  _createClass(EventManager, [{\n    key: \"subscribe\",\n    value: function subscribe(eventEmitter) {\n      this._eventEmitters.push(eventEmitter);\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(event) {\n      this._eventEmitters = this._eventEmitters.filter(function (x) {\n        return x.event !== event;\n      });\n    }\n  }, {\n    key: \"trigger\",\n    value: function trigger(payload) {\n      var eventEmitters = [];\n      var event;\n\n      if (isJsonRpcRequest(payload)) {\n        event = payload.method;\n      } else if (isJsonRpcResponseSuccess(payload) || isJsonRpcResponseError(payload)) {\n        event = \"response:\".concat(payload.id);\n      } else if (isInternalEvent(payload)) {\n        event = payload.event;\n      } else {\n        event = \"\";\n      }\n\n      if (event) {\n        eventEmitters = this._eventEmitters.filter(function (eventEmitter) {\n          return eventEmitter.event === event;\n        });\n      }\n\n      if ((!eventEmitters || !eventEmitters.length) && !isReservedEvent(event) && !isInternalEvent(event)) {\n        eventEmitters = this._eventEmitters.filter(function (eventEmitter) {\n          return eventEmitter.event === \"call_request\";\n        });\n      }\n\n      eventEmitters.forEach(function (eventEmitter) {\n        if (isJsonRpcResponseError(payload)) {\n          var error = new Error(payload.error.message);\n          eventEmitter.callback(error, null);\n        } else {\n          eventEmitter.callback(null, payload);\n        }\n      });\n    }\n  }]);\n\n  return EventManager;\n}();\n\nexport default EventManager;","map":{"version":3,"mappings":";;AAAA,SACEA,gBADF,EAEEC,wBAFF,EAGEC,sBAHF,EAIEC,eAJF,EAKEC,eALF,QAMO,sBANP;;IAiBMC,Y;AAGJ;AAAA;;AACE,SAAKC,cAAL,GAAsB,EAAtB;AACD;;;;WAEM,mBAAUC,YAAV,EAAqC;AAC1C,WAAKD,cAAL,CAAoBE,IAApB,CAAyBD,YAAzB;AACD;;;WAEM,qBAAYE,KAAZ,EAAyB;AAC9B,WAAKH,cAAL,GAAsB,KAAKA,cAAL,CAAoBI,MAApB,CAA2B,WAAC;AAAA,eAAIC,CAAC,CAACF,KAAF,KAAYA,KAAhB;AAAA,OAA5B,CAAtB;AACD;;;WAEM,iBACLG,OADK,EACsF;AAE3F,UAAIC,aAAa,GAAoB,EAArC;AACA,UAAIJ,KAAJ;;AAEA,UAAIT,gBAAgB,CAACY,OAAD,CAApB,EAA+B;AAC7BH,aAAK,GAAGG,OAAO,CAACE,MAAhB;AACD,OAFD,MAEO,IAAIb,wBAAwB,CAACW,OAAD,CAAxB,IAAqCV,sBAAsB,CAACU,OAAD,CAA/D,EAA0E;AAC/EH,aAAK,sBAAeG,OAAO,CAACG,EAAvB,CAAL;AACD,OAFM,MAEA,IAAIZ,eAAe,CAACS,OAAD,CAAnB,EAA8B;AACnCH,aAAK,GAAGG,OAAO,CAACH,KAAhB;AACD,OAFM,MAEA;AACLA,aAAK,GAAG,EAAR;AACD;;AAED,UAAIA,KAAJ,EAAW;AACTI,qBAAa,GAAG,KAAKP,cAAL,CAAoBI,MAApB,CACd,UAACH,YAAD;AAAA,iBAAiCA,YAAY,CAACE,KAAb,KAAuBA,KAAxD;AAAA,SADc,CAAhB;AAGD;;AAED,UACE,CAAC,CAACI,aAAD,IAAkB,CAACA,aAAa,CAACG,MAAlC,KACA,CAACZ,eAAe,CAACK,KAAD,CADhB,IAEA,CAACN,eAAe,CAACM,KAAD,CAHlB,EAIE;AACAI,qBAAa,GAAG,KAAKP,cAAL,CAAoBI,MAApB,CACd,UAACH,YAAD;AAAA,iBAAiCA,YAAY,CAACE,KAAb,KAAuB,cAAxD;AAAA,SADc,CAAhB;AAGD;;AAEDI,mBAAa,CAACI,OAAd,CAAsB,UAACV,YAAD,EAAgC;AACpD,YAAIL,sBAAsB,CAACU,OAAD,CAA1B,EAAqC;AACnC,cAAMM,KAAK,GAAG,IAAIC,KAAJ,CAAUP,OAAO,CAACM,KAAR,CAAcE,OAAxB,CAAd;AACAb,sBAAY,CAACc,QAAb,CAAsBH,KAAtB,EAA6B,IAA7B;AACD,SAHD,MAGO;AACLX,sBAAY,CAACc,QAAb,CAAsB,IAAtB,EAA4BT,OAA5B;AACD;AACF,OAPD;AAQD;;;;;;AAGH,eAAeP,YAAf","names":["isJsonRpcRequest","isJsonRpcResponseSuccess","isJsonRpcResponseError","isInternalEvent","isReservedEvent","EventManager","_eventEmitters","eventEmitter","push","event","filter","x","payload","eventEmitters","method","id","length","forEach","error","Error","message","callback"],"sourceRoot":"","sources":["../../src/events.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}