{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PhoneNumberBase = exports.anonymizedPhone = exports.isE164Number = exports.getPhoneHash = void 0;\n\nvar attestations_1 = require(\"./attestations\");\n\nvar PHONE_SALT_SEPARATOR = '__';\nvar E164_REGEX = /^\\+[1-9][0-9]{1,14}$/;\n\nvar getPhoneHash = function (sha3, phoneNumber, salt) {\n  if (!phoneNumber || !isE164Number(phoneNumber)) {\n    throw Error('Attempting to hash a non-e164 number: ' + phoneNumber);\n  }\n\n  var prefix = (0, attestations_1.getIdentifierPrefix)(attestations_1.IdentifierType.PHONE_NUMBER);\n  var value = prefix + (salt ? phoneNumber + PHONE_SALT_SEPARATOR + salt : phoneNumber);\n  return sha3(value);\n};\n\nexports.getPhoneHash = getPhoneHash;\n\nfunction isE164Number(phoneNumber) {\n  return E164_REGEX.test(phoneNumber);\n}\n\nexports.isE164Number = isE164Number;\n\nfunction anonymizedPhone(phoneNumber) {\n  return phoneNumber.slice(0, -4) + 'XXXX';\n}\n\nexports.anonymizedPhone = anonymizedPhone;\nexports.PhoneNumberBase = {\n  getPhoneHash: exports.getPhoneHash,\n  isE164Number: isE164Number\n};","map":{"version":3,"mappings":";;;;;;;AAAA;;AAUA,IAAMA,oBAAoB,GAAG,IAA7B;AACA,IAAMC,UAAU,GAAG,sBAAnB;;AAEO,IAAMC,YAAY,GAAG,UAC1BC,IAD0B,EAE1BC,WAF0B,EAG1BC,IAH0B,EAGb;AAEb,MAAI,CAACD,WAAD,IAAgB,CAACE,YAAY,CAACF,WAAD,CAAjC,EAAgD;AAC9C,UAAMG,KAAK,CAAC,2CAA2CH,WAA5C,CAAX;AACD;;AACD,MAAMI,MAAM,GAAG,wCAAoBC,8BAAeC,YAAnC,CAAf;AACA,MAAMC,KAAK,GAAGH,MAAM,IAAIH,IAAI,GAAGD,WAAW,GAAGJ,oBAAd,GAAqCK,IAAxC,GAA+CD,WAAvD,CAApB;AACA,SAAOD,IAAI,CAACQ,KAAD,CAAX;AACD,CAXM;;AAAMC,uBAAYV,YAAZ;;AAab,SAAgBI,YAAhB,CAA6BF,WAA7B,EAAgD;AAC9C,SAAOH,UAAU,CAACY,IAAX,CAAgBT,WAAhB,CAAP;AACD;;AAFDQ;;AAIA,SAAgBE,eAAhB,CAAgCV,WAAhC,EAAmD;AACjD,SAAOA,WAAW,CAACW,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,IAA2B,MAAlC;AACD;;AAFDH;AAIaA,0BAAkB;AAC7BV,cAAY,sBADiB;AAE7BI,cAAY;AAFiB,CAAlB","names":["PHONE_SALT_SEPARATOR","E164_REGEX","getPhoneHash","sha3","phoneNumber","salt","isE164Number","Error","prefix","attestations_1","PHONE_NUMBER","value","exports","test","anonymizedPhone","slice"],"sourceRoot":"","sources":["../src/phoneNumbers.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}